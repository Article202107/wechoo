(this.webpackJsonpwechoo=this.webpackJsonpwechoo||[]).push([[0],{45:function(e,t,n){},46:function(e,t,n){"use strict";n.r(t);var c=n(2),i=n.n(c),a=n(27),r=n.n(a),s=n(6),o=n(20),u=n(5),j=n(10),O=n.n(j),d=n(15),l=n(21),b=n(18),p=(n(34),n(47),n(48),{apiKey:Object({NODE_ENV:"production",PUBLIC_URL:"/wechoo",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_API_KEY,authDomain:Object({NODE_ENV:"production",PUBLIC_URL:"/wechoo",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_AUTH_DOMAIN,projectId:Object({NODE_ENV:"production",PUBLIC_URL:"/wechoo",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_PROJECT_ID,storageBucket:Object({NODE_ENV:"production",PUBLIC_URL:"/wechoo",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_STORAGE_BUCKET,messagingSenderId:Object({NODE_ENV:"production",PUBLIC_URL:"/wechoo",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_MESSAGING_SENDER_ID,appId:Object({NODE_ENV:"production",PUBLIC_URL:"/wechoo",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_API_ID,measurementId:Object({NODE_ENV:"production",PUBLIC_URL:"/wechoo",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_MEASUREMENT_ID});b.a.initializeApp(p);var h=b.a.auth,v=b.a.auth(),x=b.a.firestore(),m=(b.a.storage(),n(1)),_=function(e){var t=e.questionObj,n=e.userObj,i=t.creator===n.uid,a=Object(c.useState)(!1),r=Object(s.a)(a,2),o=r[0],u=r[1],j=Object(c.useState)(""),b=Object(s.a)(j,2),p=b[0],h=b[1],v=Object(c.useState)(""),_=Object(s.a)(v,2),S=_[0],f=_[1],E=Object(c.useState)(""),C=Object(s.a)(E,2),g=C[0],A=C[1],T=Object(c.useState)({}),w=Object(s.a)(T,2),P=w[0],D=w[1],R=Object(c.useState)([]),N=Object(s.a)(R,2),k=N[0],I=N[1],B=function(){var e=Object(d.a)(O.a.mark((function e(){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=window.confirm("\uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?"),e.t0=n,!e.t0){e.next=5;break}return e.next=5,x.collection("Question").doc(t.id).delete();case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),K=function(e){var t=e.target,n=t.name,c=t.value;"newQuestion"===n?h(c):"newItemA"===n?f(c):"newItemB"===n&&A(c)},W=function(){o||(h(t.question),f(t.itemA),A(t.itemB)),u((function(e){return!e}))};Object(c.useEffect)((function(){x.collection("Answer").where("qid","==",t.id).onSnapshot((function(e){var t=e.docs.map((function(e){return Object(l.a)({id:e.id},e.data())}));I(t),D({pickCountA:t.filter((function(e){return"A"===e.pickCode})).length,pickCountB:t.filter((function(e){return"B"===e.pickCode})).length})}))}),[]);var H=function(){var e=Object(d.a)(O.a.mark((function e(n){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,x.collection("Question").doc(t.id).update({question:p,itemA:S,itemB:g});case 3:W();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=Object(d.a)(O.a.mark((function e(c){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!k.find((function(e){return e.uid===n.uid}))){e.next=3;break}return alert("\uc774\ubbf8 \uc120\ud0dd\ud558\uc168\uc2b5\ub2c8\ub2e4."),e.abrupt("return");case 3:return e.next=5,x.collection("Answer").add({qid:t.id,uid:n.uid,pickCode:c,createAt:Date.now()});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(m.jsx)(m.Fragment,{children:o?Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)("form",{onSubmit:H,children:[Object(m.jsx)("input",{name:"newQuestion",onChange:K,value:p,type:"text"}),Object(m.jsxs)("div",{children:[Object(m.jsx)("input",{name:"newItemA",onChange:K,value:S,type:"text"}),Object(m.jsx)("input",{name:"newItemB",onChange:K,value:g,type:"text"})]}),Object(m.jsx)("input",{type:"submit",value:"Edit"}),Object(m.jsx)("button",{onClick:W,children:"Cancel"})]})}):Object(m.jsxs)("div",{className:"contDiv",children:[Object(m.jsxs)("div",{className:"compDiv",children:[Object(m.jsx)("div",{className:"vsLeft"}),Object(m.jsx)("div",{className:"vsRight"})]}),Object(m.jsxs)("div",{className:"txtDiv",children:[Object(m.jsx)("div",{className:"question",children:t.question}),Object(m.jsxs)("div",{className:"pickQuest",children:[Object(m.jsxs)("div",{children:[Object(m.jsx)("span",{children:P.pickCountA}),Object(m.jsx)("button",{onClick:function(){return y("A")},children:t.itemA})]}),Object(m.jsx)("div",{children:" VS "}),Object(m.jsxs)("div",{children:[Object(m.jsx)("span",{children:P.pickCountB}),Object(m.jsx)("button",{onClick:function(){return y("B")},children:t.itemB})]})]})]}),i&&Object(m.jsxs)("div",{className:"edit-buttons",children:[Object(m.jsx)("button",{onClick:B,children:"Delete Question"}),Object(m.jsx)("button",{onClick:W,children:"Edit Question"})]})]})})},S=function(e){var t=e.userObj,n=Object(c.useState)(""),i=Object(s.a)(n,2),a=i[0],r=i[1],o=Object(c.useState)(""),u=Object(s.a)(o,2),j=u[0],b=u[1],p=Object(c.useState)(""),h=Object(s.a)(p,2),v=h[0],S=h[1],f=Object(c.useState)([]),E=Object(s.a)(f,2),C=E[0],g=E[1];Object(c.useEffect)((function(){x.collection("Question").orderBy("createAt","desc").onSnapshot((function(e){var t=e.docs.map((function(e){return Object(l.a)(Object(l.a)({id:e.id},e.data()),{},{pickCountA:0,pickCountB:0})}));g(t)}))}),[]);var A=function(e){var t=e.target,n=t.name,c=t.value;"question"===n?r(c):"itemA"===n?b(c):"itemB"===n&&S(c)},T=function(){var e=Object(d.a)(O.a.mark((function e(n){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),console.log(a),e.next=4,x.collection("Question").add({question:a,itemA:j,itemB:v,creator:t.uid,createAt:Date.now()});case 4:r("");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(m.jsxs)("div",{children:[Object(m.jsxs)("form",{onSubmit:T,children:[Object(m.jsx)("span",{children:"question"}),Object(m.jsx)("input",{name:"question",placeholder:"\ubb34\uc5c7\uc744 \uc120\ud0dd\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?",value:a,onChange:A,type:"text"}),Object(m.jsxs)("div",{children:[Object(m.jsx)("input",{type:"text",name:"itemA",placeholder:"A\uc548",value:j,onChange:A}),Object(m.jsx)("input",{type:"text",name:"itemB",placeholder:"B\uc548",value:v,onChange:A})]}),Object(m.jsx)("input",{type:"submit",value:"question"})]}),Object(m.jsx)("div",{children:C.map((function(e){return Object(m.jsx)(_,{questionObj:e,userObj:t},e.id)}))})]})},f=function(){return Object(m.jsx)("span",{children:"Profile"})},E=function(){return Object(m.jsxs)("nav",{className:"nav-header",children:[Object(m.jsx)("div",{className:"nav-center",children:Object(m.jsx)(o.b,{to:"/",children:"Home"})}),Object(m.jsxs)("div",{className:"nav-util",children:[Object(m.jsx)(o.b,{to:"/profile",children:"Profile"}),Object(m.jsx)("input",{type:"button",value:"Log Out",onClick:function(){v.signOut()}})]})]})},C=function(){var e=Object(c.useState)(""),t=Object(s.a)(e,2),n=t[0],i=t[1],a=Object(c.useState)(""),r=Object(s.a)(a,2),o=r[0],u=r[1],j=Object(c.useState)(!1),l=Object(s.a)(j,2),b=l[0],p=l[1],x=Object(c.useState)(""),_=Object(s.a)(x,2),S=_[0],f=_[1],E=function(e){var t=e.target,n=t.name,c=t.value;"email"===n?i(c):"password"===n&&u(c)},C=function(){var e=Object(d.a)(O.a.mark((function e(t){var n,c,i;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.target.name,e.prev=1,"google"===n?c=new h.GoogleAuthProvider:"github"===n&&(c=new h.GithubAuthProvider),e.next=5,v.signInWithPopup(c);case 5:i=e.sent,console.log(i),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0.message);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=Object(d.a)(O.a.mark((function e(t){var c;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),e.prev=1,!b){e.next=8;break}return e.next=5,v.createUserWithEmailAndPassword(n,o);case 5:c=e.sent,e.next=11;break;case 8:return e.next=10,v.signInWithEmailAndPassword(n,o);case 10:c=e.sent;case 11:console.log(c),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),f(e.t0.message);case 17:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(t){return e.apply(this,arguments)}}();return Object(m.jsxs)("div",{className:"main",children:[Object(m.jsx)("h1",{className:"login-title",children:"Login"}),Object(m.jsxs)("form",{className:"signin-form",onSubmit:g,children:[Object(m.jsx)("input",{type:"text",name:"email",value:n,onChange:E,placeholder:"Email Address *",className:"signin-form__email",required:!0}),Object(m.jsx)("input",{type:"password",name:"password",value:o,onChange:E,placeholder:"Password *",className:"signin-form__password",required:!0}),Object(m.jsx)("input",{type:"submit",value:b?"\ud68c\uc6d0\uac00\uc785":"\ub85c\uadf8\uc778",className:"signin-form__submit"}),Object(m.jsx)("div",{children:S})]}),Object(m.jsxs)("div",{className:"social-login",children:[Object(m.jsx)("button",{className:"social-login__google",name:"google",onClick:C,children:"Continue with Google"}),Object(m.jsx)("button",{className:"social-login__github",name:"github",onClick:C,children:"Continue with Github"})]}),Object(m.jsx)("span",{className:"toggle-account",onClick:function(){return p(!b)},children:b?"\ub85c\uadf8\uc778":"\ud68c\uc6d0\uac00\uc785"})]})},g=function(e){var t=e.isLoggedIn,n=e.userObj;return Object(m.jsxs)(o.a,{children:[t?Object(m.jsx)(E,{}):"",Object(m.jsx)(u.d,{children:t?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(u.b,{exact:!0,path:"/",children:Object(m.jsx)(S,{userObj:n})}),Object(m.jsx)(u.b,{exact:!0,path:"/profile",children:Object(m.jsx)(f,{})}),Object(m.jsx)(u.a,{from:"/*",to:"/"})]}):Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(u.b,{exact:!0,path:"/",children:Object(m.jsx)(C,{})}),Object(m.jsx)(u.a,{from:"/*",to:"/"})]})})]})};var A=function(){var e=Object(c.useState)(!1),t=Object(s.a)(e,2),n=t[0],i=t[1],a=Object(c.useState)(v.currentUser),r=Object(s.a)(a,2),o=r[0],u=r[1],j=Object(c.useState)(null),O=Object(s.a)(j,2),d=O[0],l=O[1];return Object(c.useEffect)((function(){v.onAuthStateChanged((function(e){console.log(e),e?(u(!0),l(e)):u(!1),i(!0)}))})),Object(m.jsx)(m.Fragment,{children:n?Object(m.jsx)(g,{isLoggedIn:o,userObj:d}):"Loading..."})};n(45);r.a.render(Object(m.jsx)(i.a.StrictMode,{children:Object(m.jsx)(A,{})}),document.getElementById("root"))}},[[46,1,2]]]);
//# sourceMappingURL=main.26291810.chunk.js.map