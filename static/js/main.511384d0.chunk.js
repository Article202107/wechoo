(this.webpackJsonpwechoo=this.webpackJsonpwechoo||[]).push([[0],{50:function(e,t,n){},51:function(e,t,n){"use strict";n.r(t);var c=n(2),a=n.n(c),r=n(31),i=n.n(r),s=n(6),u=n(21),o=n(7),l=n(22),j=n(20);n(37),n(52),n(53);j.a.initializeApp({apiKey:"AIzaSyCzX21--oQ7YQqGcRcZOZk1ntQvr4FYwkY",authDomain:"wechoo-ce4f1.firebaseapp.com",projectId:"wechoo-ce4f1",storageBucket:"wechoo-ce4f1.appspot.com",messagingSenderId:"534329892446",appId:"1:534329892446:web:987c3804d1c8075b66decf",measurementId:"G-56PJZ3JMQJ"});var m=j.a.auth,b=j.a.auth(),d=j.a.firestore(),O=j.a.storage(),f=n(9),p=n.n(f),h=n(16),x=n(55),g=n(1),v=function(e){var t=e.userObj,n=e.questionObj,a=void 0===n?null:n,r=e.toggleEdit,i=void 0===r?null:r,u=Object(c.useState)(""),o=Object(s.a)(u,2),l=o[0],j=o[1],m=Object(c.useState)(""),b=Object(s.a)(m,2),f=b[0],v=b[1],N=Object(c.useState)(""),k=Object(s.a)(N,2),w=k[0],A=k[1],_=Object(c.useState)(""),q=Object(s.a)(_,2),S=q[0],C=q[1],B=Object(c.useState)(""),y=Object(s.a)(B,2),U=y[0],I=y[1],E=Object(c.useState)(""),F=Object(s.a)(E,2),L=F[0],P=F[1],D=Object(c.useState)(""),Q=Object(s.a)(D,2),R=Q[0],G=Q[1],J=Object(c.useState)(""),z=Object(s.a)(J,2),W=z[0],Y=z[1];Object(c.useEffect)((function(){a&&(v(a.question),A(a.itemA),C(a.itemB),G(""),Y(""),document.querySelector("input[name='fileA']").value=null,document.querySelector("input[name='fileB']").value=null)}),[a]);var Z=function(){var e=Object(h.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.imageUrlA||!R){e.next=3;break}return e.next=3,O.refFromURL(a.imageUrlA).delete();case 3:if(!a.imageUrlB||!W){e.next=6;break}return e.next=6,O.refFromURL(a.imageUrlB).delete();case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),M=function(e){var t=e.target,n=t.name,c=t.value;a?"question"===n?v(c):"itemA"===n?A(c):"itemB"===n&&C(c):"question"===n?j(c):"itemA"===n?I(c):"itemB"===n&&P(c)},T=function(){var e=Object(h.a)(p.a.mark((function e(n){var c,a,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c="",!n){e.next=9;break}return a=O.ref().child("images/".concat(t.uid,"/").concat(Object(x.a)())),e.next=5,a.putString(n,"data_url");case 5:return r=e.sent,e.next=8,r.ref.getDownloadURL();case 8:c=e.sent;case 9:return e.abrupt("return",c);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),H=function(){var e=Object(h.a)(p.a.mark((function e(n){var c,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,T(R);case 3:return c=e.sent,e.next=6,T(W);case 6:if(r=e.sent,!a){e.next=15;break}return e.next=10,Z();case 10:return e.next=12,d.collection("Question").doc(a.id).update({question:f,itemA:w,itemB:S,imageUrlA:c||a.imageUrlA,imageUrlB:r||a.imageUrlB});case 12:i(),e.next=22;break;case 15:return e.next=17,d.collection("Question").add({question:l,itemA:U,imageUrlA:c,itemB:L,imageUrlB:r,creator:t.uid,createAt:Date.now()});case 17:j(""),G(null),Y(null),document.querySelector("input[name='fileA']").value=null,document.querySelector("input[name='fileB']").value=null;case 22:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),K=function(e){var t=e.target,n=t.name,c=t.files[0],a=new FileReader;a.onloadend=function(e){var t=e.currentTarget.result;"fileA"===n?G(t):"fileB"===n&&Y(t)},a.readAsDataURL(c)},X=function(e){e.preventDefault();var t,n=e.target.name;"cancelImageA"===n?(t=document.querySelector("input[name='fileA']"),G(null)):"cancelImageB"===n&&(t=document.querySelector("input[name='fileB']"),Y(null)),t.value=null};return Object(g.jsxs)("form",{className:"form-question",onSubmit:H,children:[Object(g.jsx)("input",{name:"question",placeholder:"Title *",value:a?f:l,onChange:M,className:"question-title",type:"text",required:!0}),Object(g.jsx)("div",{className:"div-line"}),Object(g.jsxs)("div",{className:"form-question__select select-items",children:[Object(g.jsxs)("div",{className:"select-items__input",children:[Object(g.jsx)("input",{type:"text",name:"itemA",className:"item__input-text",placeholder:"\uc120\ud0dd1 *",value:a?w:U,onChange:M,required:!0}),Object(g.jsx)("input",{type:"file",name:"fileA",className:"item__file-attach",accept:"image/*",placeholder:"\ucca8\ubd80\ud30c\uc77c1",onChange:K}),R&&Object(g.jsxs)("div",{className:"preview-image",children:[Object(g.jsx)("img",{src:R,alt:"A\uc548 \uc774\ubbf8\uc9c0"}),Object(g.jsx)("button",{name:"cancelImageA",onClick:X,children:"Cancel"})]})]}),Object(g.jsx)("div",{className:"div-line"}),Object(g.jsxs)("div",{className:"select-items__input",children:[Object(g.jsx)("input",{type:"text",name:"itemB",className:"item__input-text",placeholder:"\uc120\ud0dd2 *",value:a?S:L,onChange:M,required:!0}),Object(g.jsx)("input",{type:"file",name:"fileB",className:"item__file-attach",accept:"image/*",placeholder:"\ucca8\ubd80\ud30c\uc77c2",onChange:K}),W&&Object(g.jsxs)("div",{className:"preview-image",children:[Object(g.jsx)("img",{src:W,alt:"B\uc548 \uc774\ubbf8\uc9c0"}),Object(g.jsx)("button",{name:"cancelImageB",onClick:X,children:"Cancel"})]})]})]}),Object(g.jsxs)("div",{className:"question-buttons",children:[Object(g.jsx)("button",{className:"question-cancel",onClick:i,children:"\ucde8 \uc18c"}),Object(g.jsx)("input",{className:"question-submit",type:"submit",value:a?"\uc218\uc815":"\ub4f1 \ub85d"})]})]})},N=function(e){var t=e.questionObj,n=e.userObj,a=t.creator===n.uid,r=Object(c.useState)(!1),i=Object(s.a)(r,2),u=i[0],o=i[1],j=Object(c.useState)({}),m=Object(s.a)(j,2),b=m[0],f=m[1],x=Object(c.useState)([]),N=Object(s.a)(x,2),k=N[0],w=N[1],A=function(){var e=Object(h.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("\uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?")){e.next=6;break}return e.next=4,d.collection("Question").doc(t.id).delete();case 4:return e.next=6,_();case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),_=function(){var e=Object(h.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.imageUrlA){e.next=3;break}return e.next=3,O.refFromURL(t.imageUrlA).delete();case 3:if(!t.imageUrlB){e.next=6;break}return e.next=6,O.refFromURL(t.imageUrlB).delete();case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),q=function(){o((function(e){return!e}))};Object(c.useEffect)((function(){d.collection("Answer").where("qid","==",t.id).onSnapshot((function(e){var t=e.docs.map((function(e){return Object(l.a)({id:e.id},e.data())}));w(t),f({pickCountA:t.filter((function(e){return"A"===e.pickCode})).length,pickCountB:t.filter((function(e){return"B"===e.pickCode})).length})}))}),[t.id]);var S=function(){var e=Object(h.a)(p.a.mark((function e(c){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!k.find((function(e){return e.uid===n.uid}))){e.next=3;break}return alert("\uc774\ubbf8 \uc120\ud0dd\ud558\uc168\uc2b5\ub2c8\ub2e4."),e.abrupt("return");case 3:return e.next=5,d.collection("Answer").add({qid:t.id,uid:n.uid,pickCode:c,createAt:Date.now()});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(g.jsx)(g.Fragment,{children:u?Object(g.jsx)(v,{userObj:n,questionObj:t,toggleEdit:q}):Object(g.jsxs)("div",{className:"question-card",children:[Object(g.jsx)("span",{className:"question__title",children:t.question}),Object(g.jsxs)("div",{className:"question__items",children:[Object(g.jsxs)("div",{onClick:function(){return S("A")},className:"quest-item",children:[Object(g.jsx)("img",{className:"item-image",src:t.imageUrlA,alt:"A\uc548 \uc774\ubbf8\uc9c0"}),Object(g.jsx)("span",{className:"item-count",children:b.pickCountA}),Object(g.jsx)("span",{className:"item-desc",children:t.itemA})]}),Object(g.jsxs)("div",{onClick:function(){return S("B")},className:"quest-item",children:[Object(g.jsx)("img",{className:"item-image",src:t.imageUrlB,alt:"B\uc548 \uc774\ubbf8\uc9c0"}),Object(g.jsx)("span",{className:"item-count",children:b.pickCountB}),Object(g.jsx)("span",{className:"item-desc",children:t.itemB})]})]}),Object(g.jsx)("div",{className:"question-edit",children:a&&Object(g.jsxs)("div",{className:"edit-buttons",children:[Object(g.jsx)("button",{onClick:A,children:"\uc0ad\uc81c"}),Object(g.jsx)("button",{onClick:q,children:"\uc218\uc815"})]})})]})})},k=function(e){var t=e.userObj,n=Object(c.useState)(!1),a=Object(s.a)(n,2),r=a[0],i=a[1],u=Object(c.useState)([]),o=Object(s.a)(u,2),j=o[0],m=o[1];Object(c.useEffect)((function(){d.collection("Question").orderBy("createAt","desc").onSnapshot((function(e){var t=e.docs.map((function(e){return Object(l.a)(Object(l.a)({id:e.id},e.data()),{},{pickCountA:0,pickCountB:0})}));m(t)}))}),[]);var b=function(){i((function(e){return!e}))};return Object(g.jsxs)(g.Fragment,{children:[!r&&Object(g.jsx)("div",{className:"sub-header",children:Object(g.jsx)("button",{className:"reg-button__question",onClick:b,children:"Add"})}),Object(g.jsxs)("div",{className:"home-main main",children:[r&&Object(g.jsx)(v,{userObj:t,toggleEdit:b}),Object(g.jsx)("div",{children:j.map((function(e){return Object(g.jsx)(N,{questionObj:e,userObj:t},e.id)}))})]})]})},w=function(){return Object(g.jsx)("span",{children:"Profile"})},A=function(){return Object(g.jsxs)("nav",{className:"header",children:[Object(g.jsxs)("ul",{className:"header__menu",children:[Object(g.jsx)("li",{className:"header__menu-item",children:Object(g.jsx)(u.b,{to:"/",children:"Home"})}),Object(g.jsx)("li",{className:"header__menu-item",children:Object(g.jsx)(u.b,{to:"/profile",children:"Profile"})})]}),Object(g.jsx)("span",{className:"header__logout",onClick:function(){b.signOut()},children:"Log Out"})]})},_=n(29),q=n(28),S=function(){var e=Object(c.useState)(""),t=Object(s.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(""),i=Object(s.a)(r,2),u=i[0],o=i[1],l=Object(c.useState)(!1),j=Object(s.a)(l,2),d=j[0],O=j[1],f=Object(c.useState)(""),x=Object(s.a)(f,2),v=x[0],N=x[1],k=function(e){var t=e.target,n=t.name,c=t.value;"email"===n?a(c):"password"===n&&o(c)},w=function(){var e=Object(h.a)(p.a.mark((function e(t){var n,c,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.target.name,e.prev=1,"google"===n?c=new m.GoogleAuthProvider:"github"===n&&(c=new m.GithubAuthProvider),e.next=5,b.signInWithPopup(c);case 5:a=e.sent,console.log(a),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0.message);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),A=function(){var e=Object(h.a)(p.a.mark((function e(t){var c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),e.prev=1,!d){e.next=8;break}return e.next=5,b.createUserWithEmailAndPassword(n,u);case 5:c=e.sent,e.next=11;break;case 8:return e.next=10,b.signInWithEmailAndPassword(n,u);case 10:c=e.sent;case 11:console.log(c),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),N(e.t0.message);case 17:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(t){return e.apply(this,arguments)}}();return Object(g.jsxs)("div",{className:"auth-main main",children:[Object(g.jsx)("h1",{className:"login-title",children:"Login"}),Object(g.jsxs)("form",{className:"signin-form",onSubmit:A,children:[Object(g.jsx)("input",{type:"text",name:"email",value:n,onChange:k,placeholder:"Email Address *",className:"signin-form__email",required:!0}),Object(g.jsx)("input",{type:"password",name:"password",value:u,onChange:k,placeholder:"Password *",className:"signin-form__password",required:!0}),Object(g.jsx)("input",{type:"submit",value:d?"\ud68c\uc6d0\uac00\uc785":"\ub85c\uadf8\uc778",className:"signin-form__submit"}),Object(g.jsx)("div",{children:v})]}),Object(g.jsxs)("div",{className:"social-login",children:[Object(g.jsxs)("button",{className:"social-login__google",name:"google",onClick:w,children:[Object(g.jsx)(q.a,{icon:_.b,className:"faGoogle"}),"Continue with Google"]}),Object(g.jsxs)("button",{className:"social-login__github",name:"github",onClick:w,children:[Object(g.jsx)(q.a,{icon:_.a}),"Continue with Github"]})]}),Object(g.jsx)("span",{className:"toggle-account",onClick:function(){return O(!d)},children:d?"\ub85c\uadf8\uc778":"\ud68c\uc6d0\uac00\uc785"})]})},C=function(e){var t=e.isLoggedIn,n=e.userObj;return Object(g.jsxs)(u.a,{children:[t?Object(g.jsx)(A,{}):"",Object(g.jsx)(o.d,{children:t?Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(o.b,{exact:!0,path:"/",children:Object(g.jsx)(k,{userObj:n})}),Object(g.jsx)(o.b,{exact:!0,path:"/profile",children:Object(g.jsx)(w,{})}),Object(g.jsx)(o.a,{from:"/*",to:"/"})]}):Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(o.b,{exact:!0,path:"/",children:Object(g.jsx)(S,{})}),Object(g.jsx)(o.a,{from:"/*",to:"/"})]})})]})};var B=function(){var e=Object(c.useState)(!1),t=Object(s.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(b.currentUser),i=Object(s.a)(r,2),u=i[0],o=i[1],l=Object(c.useState)(null),j=Object(s.a)(l,2),m=j[0],d=j[1];return Object(c.useEffect)((function(){b.onAuthStateChanged((function(e){e?(o(!0),d(e)):o(!1),a(!0)}))})),Object(g.jsx)(g.Fragment,{children:n?Object(g.jsx)(C,{isLoggedIn:u,userObj:m}):"Loading..."})};n(50);i.a.render(Object(g.jsx)(a.a.StrictMode,{children:Object(g.jsx)(B,{})}),document.getElementById("root"))}},[[51,1,2]]]);
//# sourceMappingURL=main.511384d0.chunk.js.map