(this.webpackJsonpwechoo=this.webpackJsonpwechoo||[]).push([[0],{45:function(e,t,n){},46:function(e,t,n){"use strict";n.r(t);var a=n(2),c=n.n(a),i=n(27),s=n.n(i),r=n(5),u=n(20),l=n(6),o=n(7),j=n.n(o),m=n(14),d=n(21),b=n(18);n(34),n(47),n(48);b.a.initializeApp({apiKey:"AIzaSyCzX21--oQ7YQqGcRcZOZk1ntQvr4FYwkY",authDomain:"wechoo-ce4f1.firebaseapp.com",projectId:"wechoo-ce4f1",storageBucket:"wechoo-ce4f1.appspot.com",messagingSenderId:"534329892446",appId:"1:534329892446:web:987c3804d1c8075b66decf",measurementId:"G-56PJZ3JMQJ"});var p=b.a.auth,O=b.a.auth(),f=b.a.firestore(),h=b.a.storage(),x=n(50),g=function(){var e=Object(m.a)(j.a.mark((function e(t,n){var a,c,i;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a="",!n){e.next=9;break}return c=h.ref().child("images/".concat(t,"/").concat(Object(x.a)())),e.next=5,c.putString(n,"data_url");case 5:return i=e.sent,e.next=8,i.ref.getDownloadURL();case 8:a=e.sent;case 9:return e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),v=n(1),w=function(e){var t=e.questionObj,n=e.userObj,c=t.creator===n.uid,i=Object(a.useState)(!1),s=Object(r.a)(i,2),u=s[0],l=s[1],o=Object(a.useState)(""),b=Object(r.a)(o,2),p=b[0],O=b[1],x=Object(a.useState)(""),w=Object(r.a)(x,2),N=w[0],_=w[1],A=Object(a.useState)(""),k=Object(r.a)(A,2),C=k[0],q=k[1],S=Object(a.useState)({}),B=Object(r.a)(S,2),y=B[0],I=B[1],U=Object(a.useState)([]),D=Object(r.a)(U,2),F=D[0],L=D[1],Q=Object(a.useState)(""),P=Object(r.a)(Q,2),E=P[0],R=P[1],G=Object(a.useState)(""),J=Object(r.a)(G,2),T=J[0],z=J[1],W=function(){var e=Object(m.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("\uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?")){e.next=6;break}return e.next=4,f.collection("Question").doc(t.id).delete();case 4:return e.next=6,Y();case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Y=function(){var e=Object(m.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.imageUrlA){e.next=3;break}return e.next=3,h.refFromURL(t.imageUrlA).delete();case 3:if(!t.imageUrlB){e.next=6;break}return e.next=6,h.refFromURL(t.imageUrlB).delete();case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Z=function(e){var t=e.target,n=t.name,a=t.value;"newQuestion"===n?O(a):"newItemA"===n?_(a):"newItemB"===n&&q(a)},M=function(){u||(O(t.question),_(t.itemA),q(t.itemB),R(""),z(""),document.querySelector("input[name='fileA']").value=null,document.querySelector("input[name='fileB']").value=null),l((function(e){return!e}))};Object(a.useEffect)((function(){f.collection("Answer").where("qid","==",t.id).onSnapshot((function(e){var t=e.docs.map((function(e){return Object(d.a)({id:e.id},e.data())}));L(t),I({pickCountA:t.filter((function(e){return"A"===e.pickCode})).length,pickCountB:t.filter((function(e){return"B"===e.pickCode})).length})}))}),[t.id]);var H=function(){var e=Object(m.a)(j.a.mark((function e(a){var c,i;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.next=3,Y();case 3:return e.next=5,g(n.uid,E);case 5:return c=e.sent,e.next=8,g(n.uid,T);case 8:return i=e.sent,e.next=11,f.collection("Question").doc(t.id).update({question:p,itemA:N,itemB:C,imageUrlA:c,imageUrlB:i});case 11:M();case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),K=function(){var e=Object(m.a)(j.a.mark((function e(a){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!F.find((function(e){return e.uid===n.uid}))){e.next=3;break}return alert("\uc774\ubbf8 \uc120\ud0dd\ud558\uc168\uc2b5\ub2c8\ub2e4."),e.abrupt("return");case 3:return e.next=5,f.collection("Answer").add({qid:t.id,uid:n.uid,pickCode:a,createAt:Date.now()});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),X=function(e){var t=e.target,n=t.name,a=t.files[0],c=new FileReader;c.onloadend=function(e){var t=e.currentTarget.result;"fileA"===n?R(t):"fileB"===n&&z(t)},c.readAsDataURL(a)},V=function(e){e.preventDefault();var t,n=e.target.name;"cancelImageA"===n?(t=document.querySelector("input[name='fileA']"),R(null)):"cancelImageB"===n&&(t=document.querySelector("input[name='fileB']"),z(null)),t.value=null};return Object(v.jsx)(v.Fragment,{children:u?Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)("form",{className:"form-question edit",onSubmit:H,children:[Object(v.jsx)("input",{name:"newQuestion",placeholder:"Title *",onChange:Z,value:p,className:"question-title",type:"text"}),Object(v.jsxs)("div",{className:"form-question__select select-items",children:[Object(v.jsxs)("div",{className:"select-items__input",children:[Object(v.jsx)("input",{type:"text",name:"newItemA",className:"item__input-text",placeholder:"A\uc548",value:N,onChange:Z}),Object(v.jsx)("input",{type:"file",name:"fileA",className:"item__file-attach",accept:"image/*",placeholder:"\ucca8\ubd80\ud30c\uc77c1",onChange:X}),E&&Object(v.jsxs)("div",{className:"preview-image",children:[Object(v.jsx)("img",{src:E,alt:"A\uc548 \uc774\ubbf8\uc9c0"}),Object(v.jsx)("button",{name:"cancelImageA",onClick:V,children:"Cancel"})]})]}),Object(v.jsxs)("div",{className:"select-items__input",children:[Object(v.jsx)("input",{type:"text",name:"newItemB",className:"item__input-text",placeholder:"B\uc548",value:C,onChange:Z}),Object(v.jsx)("input",{type:"file",name:"fileB",className:"item__file-attach",accept:"image/*",placeholder:"\ucca8\ubd80\ud30c\uc77c2",onChange:X}),T&&Object(v.jsxs)("div",{className:"preview-image",children:[Object(v.jsx)("img",{src:T,alt:"B\uc548 \uc774\ubbf8\uc9c0"}),Object(v.jsx)("button",{name:"cancelImageB",onClick:V,children:"Cancel"})]})]})]}),Object(v.jsx)("input",{type:"submit",value:"Edit"}),Object(v.jsx)("button",{onClick:M,children:"Cancel"})]})}):Object(v.jsxs)("div",{className:"question-card",children:[Object(v.jsx)("span",{className:"question__title",children:t.question}),Object(v.jsxs)("div",{className:"question__items",children:[Object(v.jsxs)("div",{onClick:function(){return K("A")},className:"quest-item",children:[Object(v.jsx)("img",{className:"item-image",src:t.imageUrlA,alt:"A\uc548 \uc774\ubbf8\uc9c0"}),Object(v.jsx)("span",{className:"item-count",children:y.pickCountA}),Object(v.jsx)("span",{className:"item-desc",children:t.itemA})]}),Object(v.jsxs)("div",{onClick:function(){return K("B")},className:"quest-item",children:[Object(v.jsx)("img",{className:"item-image",src:t.imageUrlB,alt:"B\uc548 \uc774\ubbf8\uc9c0"}),Object(v.jsx)("span",{className:"item-count",children:y.pickCountB}),Object(v.jsx)("span",{className:"item-desc",children:t.itemB})]})]}),Object(v.jsx)("div",{className:"question-edit",children:c&&Object(v.jsxs)("div",{className:"edit-buttons",children:[Object(v.jsx)("button",{onClick:W,children:"\uc0ad\uc81c"}),Object(v.jsx)("button",{onClick:M,children:"\uc218\uc815"})]})})]})})},N=function(e){var t=e.userObj,n=Object(a.useState)(""),c=Object(r.a)(n,2),i=c[0],s=c[1],u=Object(a.useState)(""),l=Object(r.a)(u,2),o=l[0],b=l[1],p=Object(a.useState)(""),O=Object(r.a)(p,2),h=O[0],x=O[1],N=Object(a.useState)([]),_=Object(r.a)(N,2),A=_[0],k=_[1],C=Object(a.useState)(""),q=Object(r.a)(C,2),S=q[0],B=q[1],y=Object(a.useState)(""),I=Object(r.a)(y,2),U=I[0],D=I[1];Object(a.useEffect)((function(){f.collection("Question").orderBy("createAt","desc").onSnapshot((function(e){var t=e.docs.map((function(e){return Object(d.a)(Object(d.a)({id:e.id},e.data()),{},{pickCountA:0,pickCountB:0})}));k(t)}))}),[]);var F=function(e){var t=e.target,n=t.name,a=t.value;"question"===n?s(a):"itemA"===n?b(a):"itemB"===n&&x(a)},L=function(){var e=Object(m.a)(j.a.mark((function e(n){var a,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,g(t.uid,S);case 3:return a=e.sent,e.next=6,g(t.uid,U);case 6:return c=e.sent,e.next=9,f.collection("Question").add({question:i,itemA:o,imageUrlA:a,itemB:h,imageUrlB:c,creator:t.uid,createAt:Date.now()});case 9:s(""),B(null),D(null),document.querySelector("input[name='fileA']").value=null,document.querySelector("input[name='fileB']").value=null;case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Q=function(e){var t=e.target,n=t.name,a=t.files[0],c=new FileReader;c.onloadend=function(e){var t=e.currentTarget.result;"fileA"===n?B(t):"fileB"===n&&D(t)},c.readAsDataURL(a)},P=function(e){e.preventDefault();var t,n=e.target.name;"cancelImageA"===n?(t=document.querySelector("input[name='fileA']"),B(null)):"cancelImageB"===n&&(t=document.querySelector("input[name='fileB']"),D(null)),t.value=null};return Object(v.jsxs)("div",{className:"home-main main",children:[Object(v.jsxs)("form",{className:"form-question",onSubmit:L,children:[Object(v.jsx)("input",{name:"question",placeholder:"Title *",value:i,onChange:F,className:"question-title",type:"text",required:!0}),Object(v.jsx)("div",{className:"div-line"}),Object(v.jsxs)("div",{className:"form-question__select select-items",children:[Object(v.jsxs)("div",{className:"select-items__input",children:[Object(v.jsx)("input",{type:"text",name:"itemA",className:"item__input-text",placeholder:"\uc120\ud0dd1 *",value:o,onChange:F,required:!0}),Object(v.jsx)("input",{type:"file",name:"fileA",className:"item__file-attach",accept:"image/*",placeholder:"\ucca8\ubd80\ud30c\uc77c1",onChange:Q}),S&&Object(v.jsxs)("div",{className:"preview-image",children:[Object(v.jsx)("img",{src:S,alt:"A\uc548 \uc774\ubbf8\uc9c0"}),Object(v.jsx)("button",{name:"cancelImageA",onClick:P,children:"Cancel"})]})]}),Object(v.jsx)("div",{className:"div-line"}),Object(v.jsxs)("div",{className:"select-items__input",children:[Object(v.jsx)("input",{type:"text",name:"itemB",className:"item__input-text",placeholder:"\uc120\ud0dd2 *",value:h,onChange:F,required:!0}),Object(v.jsx)("input",{type:"file",name:"fileB",className:"item__file-attach",accept:"image/*",placeholder:"\ucca8\ubd80\ud30c\uc77c2",onChange:Q}),U&&Object(v.jsxs)("div",{className:"preview-image",children:[Object(v.jsx)("img",{src:U,alt:"B\uc548 \uc774\ubbf8\uc9c0"}),Object(v.jsx)("button",{name:"cancelImageB",onClick:P,children:"Cancel"})]})]})]}),Object(v.jsxs)("div",{className:"question-buttons",children:[Object(v.jsx)("button",{className:"question-cancel",onClick:function(e){e.preventDefault()},children:"\ucde8 \uc18c"}),Object(v.jsx)("input",{className:"question-submit",type:"submit",value:"\ub4f1 \ub85d"})]})]}),Object(v.jsx)("div",{children:A.map((function(e){return Object(v.jsx)(w,{questionObj:e,userObj:t},e.id)}))})]})},_=function(){return Object(v.jsx)("span",{children:"Profile"})},A=function(){return Object(v.jsxs)("nav",{className:"header",children:[Object(v.jsxs)("ul",{className:"header__menu",children:[Object(v.jsx)("li",{className:"header__menu-item",children:Object(v.jsx)(u.b,{to:"/",children:"Home"})}),Object(v.jsx)("li",{className:"header__menu-item",children:Object(v.jsx)(u.b,{to:"/profile",children:"Profile"})})]}),Object(v.jsx)("input",{type:"button",className:"header__logout",value:"Log Out",onClick:function(){O.signOut()}})]})},k=function(){var e=Object(a.useState)(""),t=Object(r.a)(e,2),n=t[0],c=t[1],i=Object(a.useState)(""),s=Object(r.a)(i,2),u=s[0],l=s[1],o=Object(a.useState)(!1),d=Object(r.a)(o,2),b=d[0],f=d[1],h=Object(a.useState)(""),x=Object(r.a)(h,2),g=x[0],w=x[1],N=function(e){var t=e.target,n=t.name,a=t.value;"email"===n?c(a):"password"===n&&l(a)},_=function(){var e=Object(m.a)(j.a.mark((function e(t){var n,a,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.target.name,e.prev=1,"google"===n?a=new p.GoogleAuthProvider:"github"===n&&(a=new p.GithubAuthProvider),e.next=5,O.signInWithPopup(a);case 5:c=e.sent,console.log(c),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0.message);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),A=function(){var e=Object(m.a)(j.a.mark((function e(t){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),e.prev=1,!b){e.next=8;break}return e.next=5,O.createUserWithEmailAndPassword(n,u);case 5:a=e.sent,e.next=11;break;case 8:return e.next=10,O.signInWithEmailAndPassword(n,u);case 10:a=e.sent;case 11:console.log(a),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),w(e.t0.message);case 17:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(t){return e.apply(this,arguments)}}();return Object(v.jsxs)("div",{className:"auth-main main",children:[Object(v.jsx)("h1",{className:"login-title",children:"Login"}),Object(v.jsxs)("form",{className:"signin-form",onSubmit:A,children:[Object(v.jsx)("input",{type:"text",name:"email",value:n,onChange:N,placeholder:"Email Address *",className:"signin-form__email",required:!0}),Object(v.jsx)("input",{type:"password",name:"password",value:u,onChange:N,placeholder:"Password *",className:"signin-form__password",required:!0}),Object(v.jsx)("input",{type:"submit",value:b?"\ud68c\uc6d0\uac00\uc785":"\ub85c\uadf8\uc778",className:"signin-form__submit"}),Object(v.jsx)("div",{children:g})]}),Object(v.jsxs)("div",{className:"social-login",children:[Object(v.jsx)("button",{className:"social-login__google",name:"google",onClick:_,children:"Continue with Google"}),Object(v.jsx)("button",{className:"social-login__github",name:"github",onClick:_,children:"Continue with Github"})]}),Object(v.jsx)("span",{className:"toggle-account",onClick:function(){return f(!b)},children:b?"\ub85c\uadf8\uc778":"\ud68c\uc6d0\uac00\uc785"})]})},C=function(e){var t=e.isLoggedIn,n=e.userObj;return Object(v.jsxs)(u.a,{children:[t?Object(v.jsx)(A,{}):"",Object(v.jsx)(l.d,{children:t?Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(l.b,{exact:!0,path:"/",children:Object(v.jsx)(N,{userObj:n})}),Object(v.jsx)(l.b,{exact:!0,path:"/profile",children:Object(v.jsx)(_,{})}),Object(v.jsx)(l.a,{from:"/*",to:"/"})]}):Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(l.b,{exact:!0,path:"/",children:Object(v.jsx)(k,{})}),Object(v.jsx)(l.a,{from:"/*",to:"/"})]})})]})};var q=function(){var e=Object(a.useState)(!1),t=Object(r.a)(e,2),n=t[0],c=t[1],i=Object(a.useState)(O.currentUser),s=Object(r.a)(i,2),u=s[0],l=s[1],o=Object(a.useState)(null),j=Object(r.a)(o,2),m=j[0],d=j[1];return Object(a.useEffect)((function(){O.onAuthStateChanged((function(e){e?(l(!0),d(e)):l(!1),c(!0)}))})),Object(v.jsx)(v.Fragment,{children:n?Object(v.jsx)(C,{isLoggedIn:u,userObj:m}):"Loading..."})};n(45);s.a.render(Object(v.jsx)(c.a.StrictMode,{children:Object(v.jsx)(q,{})}),document.getElementById("root"))}},[[46,1,2]]]);
//# sourceMappingURL=main.dfbe6658.chunk.js.map