(this.webpackJsonpwechoo=this.webpackJsonpwechoo||[]).push([[0],{45:function(e,t,n){},46:function(e,t,n){"use strict";n.r(t);var c=n(2),a=n.n(c),i=n(27),s=n.n(i),r=n(5),u=n(20),l=n(6),o=n(7),j=n.n(o),m=n(14),b=n(21),d=n(18);n(34),n(47),n(48);d.a.initializeApp({apiKey:"AIzaSyCzX21--oQ7YQqGcRcZOZk1ntQvr4FYwkY",authDomain:"wechoo-ce4f1.firebaseapp.com",projectId:"wechoo-ce4f1",storageBucket:"wechoo-ce4f1.appspot.com",messagingSenderId:"534329892446",appId:"1:534329892446:web:987c3804d1c8075b66decf",measurementId:"G-56PJZ3JMQJ"});var p=d.a.auth,O=d.a.auth(),f=d.a.firestore(),h=d.a.storage(),x=n(50),g=function(){var e=Object(m.a)(j.a.mark((function e(t,n){var c,a,i;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c="",!n){e.next=9;break}return a=h.ref().child("images/".concat(t,"/").concat(Object(x.a)())),e.next=5,a.putString(n,"data_url");case 5:return i=e.sent,e.next=8,i.ref.getDownloadURL();case 8:c=e.sent;case 9:return e.abrupt("return",c);case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),v=n(1),w=function(e){var t=e.questionObj,n=e.userObj,a=t.creator===n.uid,i=Object(c.useState)(!1),s=Object(r.a)(i,2),u=s[0],l=s[1],o=Object(c.useState)(""),d=Object(r.a)(o,2),p=d[0],O=d[1],x=Object(c.useState)(""),w=Object(r.a)(x,2),A=w[0],N=w[1],k=Object(c.useState)(""),C=Object(r.a)(k,2),S=C[0],B=C[1],y=Object(c.useState)({}),_=Object(r.a)(y,2),q=_[0],I=_[1],U=Object(c.useState)([]),D=Object(r.a)(U,2),F=D[0],L=D[1],Q=Object(c.useState)(""),P=Object(r.a)(Q,2),E=P[0],R=P[1],G=Object(c.useState)(""),J=Object(r.a)(G,2),z=J[0],T=J[1],W=function(){var e=Object(m.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("\uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?")){e.next=6;break}return e.next=4,f.collection("Question").doc(t.id).delete();case 4:return e.next=6,Y();case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Y=function(){var e=Object(m.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.imageUrlA){e.next=3;break}return e.next=3,h.refFromURL(t.imageUrlA).delete();case 3:if(!t.imageUrlB){e.next=6;break}return e.next=6,h.refFromURL(t.imageUrlB).delete();case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Z=function(e){var t=e.target,n=t.name,c=t.value;"newQuestion"===n?O(c):"newItemA"===n?N(c):"newItemB"===n&&B(c)},M=function(){u||(O(t.question),N(t.itemA),B(t.itemB),R(""),T(""),document.querySelector("input[name='fileA']").value=null,document.querySelector("input[name='fileB']").value=null),l((function(e){return!e}))};Object(c.useEffect)((function(){f.collection("Answer").where("qid","==",t.id).onSnapshot((function(e){var t=e.docs.map((function(e){return Object(b.a)({id:e.id},e.data())}));L(t),I({pickCountA:t.filter((function(e){return"A"===e.pickCode})).length,pickCountB:t.filter((function(e){return"B"===e.pickCode})).length})}))}),[t.id]);var H=function(){var e=Object(m.a)(j.a.mark((function e(c){var a,i;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.preventDefault(),e.next=3,Y();case 3:return e.next=5,g(n.uid,E);case 5:return a=e.sent,e.next=8,g(n.uid,z);case 8:return i=e.sent,e.next=11,f.collection("Question").doc(t.id).update({question:p,itemA:A,itemB:S,imageUrlA:a,imageUrlB:i});case 11:M();case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),K=function(){var e=Object(m.a)(j.a.mark((function e(c){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!F.find((function(e){return e.uid===n.uid}))){e.next=3;break}return alert("\uc774\ubbf8 \uc120\ud0dd\ud558\uc168\uc2b5\ub2c8\ub2e4."),e.abrupt("return");case 3:return e.next=5,f.collection("Answer").add({qid:t.id,uid:n.uid,pickCode:c,createAt:Date.now()});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),X=function(e){var t=e.target,n=t.name,c=t.files[0],a=new FileReader;a.onloadend=function(e){var t=e.currentTarget.result;"fileA"===n?R(t):"fileB"===n&&T(t)},a.readAsDataURL(c)},V=function(e){e.preventDefault();var t,n=e.target.name;"cancelImageA"===n?(t=document.querySelector("input[name='fileA']"),R(null)):"cancelImageB"===n&&(t=document.querySelector("input[name='fileB']"),T(null)),t.value=null};return Object(v.jsx)(v.Fragment,{children:u?Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)("form",{className:"form-question edit",onSubmit:H,children:[Object(v.jsx)("input",{name:"newQuestion",onChange:Z,value:p,className:"question-title",type:"text"}),Object(v.jsxs)("div",{className:"form-question__select select-items",children:[Object(v.jsxs)("div",{className:"select-items__input",children:[Object(v.jsx)("input",{name:"newItemA",onChange:Z,value:A,type:"text"}),Object(v.jsx)("input",{type:"file",name:"fileA",accept:"image/*",onChange:X}),E&&Object(v.jsxs)("div",{className:"preview-image",children:[Object(v.jsx)("img",{src:E,alt:"A\uc548 \uc774\ubbf8\uc9c0"}),Object(v.jsx)("button",{name:"cancelImageA",onClick:V,children:"Cancel"})]})]}),Object(v.jsxs)("div",{className:"select-items__input",children:[Object(v.jsx)("input",{name:"newItemB",onChange:Z,value:S,type:"text"}),Object(v.jsx)("input",{type:"file",name:"fileB",accept:"image/*",onChange:X}),z&&Object(v.jsxs)("div",{className:"preview-image",children:[Object(v.jsx)("img",{src:z,alt:"B\uc548 \uc774\ubbf8\uc9c0"}),Object(v.jsx)("button",{name:"cancelImageB",onClick:V,children:"Cancel"})]})]})]}),Object(v.jsx)("input",{type:"submit",value:"Edit"}),Object(v.jsx)("button",{onClick:M,children:"Cancel"})]})}):Object(v.jsxs)("div",{className:"question-card",children:[Object(v.jsx)("span",{className:"question__title",children:t.question}),Object(v.jsxs)("div",{className:"question__items",children:[Object(v.jsxs)("div",{onClick:function(){return K("A")},className:"quest-item",children:[Object(v.jsx)("img",{className:"item-image",src:t.imageUrlA,alt:"A\uc548 \uc774\ubbf8\uc9c0"}),Object(v.jsx)("span",{className:"item-count",children:q.pickCountA}),Object(v.jsx)("span",{className:"item-desc",children:t.itemA})]}),Object(v.jsxs)("div",{onClick:function(){return K("B")},className:"quest-item",children:[Object(v.jsx)("img",{className:"item-image",src:t.imageUrlB,alt:"B\uc548 \uc774\ubbf8\uc9c0"}),Object(v.jsx)("span",{className:"item-count",children:q.pickCountB}),Object(v.jsx)("span",{className:"item-desc",children:t.itemB})]})]}),Object(v.jsx)("div",{className:"question-edit",children:a&&Object(v.jsxs)("div",{className:"edit-buttons",children:[Object(v.jsx)("button",{onClick:W,children:"\uc0ad\uc81c"}),Object(v.jsx)("button",{onClick:M,children:"\uc218\uc815"})]})})]})})},A=function(e){var t=e.userObj,n=Object(c.useState)(""),a=Object(r.a)(n,2),i=a[0],s=a[1],u=Object(c.useState)(""),l=Object(r.a)(u,2),o=l[0],d=l[1],p=Object(c.useState)(""),O=Object(r.a)(p,2),h=O[0],x=O[1],A=Object(c.useState)([]),N=Object(r.a)(A,2),k=N[0],C=N[1],S=Object(c.useState)(""),B=Object(r.a)(S,2),y=B[0],_=B[1],q=Object(c.useState)(""),I=Object(r.a)(q,2),U=I[0],D=I[1];Object(c.useEffect)((function(){f.collection("Question").orderBy("createAt","desc").onSnapshot((function(e){var t=e.docs.map((function(e){return Object(b.a)(Object(b.a)({id:e.id},e.data()),{},{pickCountA:0,pickCountB:0})}));C(t)}))}),[]);var F=function(e){var t=e.target,n=t.name,c=t.value;"question"===n?s(c):"itemA"===n?d(c):"itemB"===n&&x(c)},L=function(){var e=Object(m.a)(j.a.mark((function e(n){var c,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,g(t.uid,y);case 3:return c=e.sent,e.next=6,g(t.uid,U);case 6:return a=e.sent,e.next=9,f.collection("Question").add({question:i,itemA:o,imageUrlA:c,itemB:h,imageUrlB:a,creator:t.uid,createAt:Date.now()});case 9:s(""),_(null),D(null),document.querySelector("input[name='fileA']").value=null,document.querySelector("input[name='fileB']").value=null;case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Q=function(e){var t=e.target,n=t.name,c=t.files[0],a=new FileReader;a.onloadend=function(e){var t=e.currentTarget.result;"fileA"===n?_(t):"fileB"===n&&D(t)},a.readAsDataURL(c)},P=function(e){e.preventDefault();var t,n=e.target.name;"cancelImageA"===n?(t=document.querySelector("input[name='fileA']"),_(null)):"cancelImageB"===n&&(t=document.querySelector("input[name='fileB']"),D(null)),t.value=null};return Object(v.jsxs)("div",{className:"home-main main",children:[Object(v.jsxs)("form",{className:"form-question",onSubmit:L,children:[Object(v.jsx)("span",{className:"label",children:"Title"}),Object(v.jsx)("input",{name:"question",placeholder:"\ubb34\uc5c7\uc744 \uc120\ud0dd\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?",value:i,onChange:F,className:"question-title",type:"text"}),Object(v.jsxs)("div",{className:"form-question__select select-items",children:[Object(v.jsxs)("div",{className:"select-items__input",children:[Object(v.jsx)("span",{className:"label",children:"\uc120\ud0dd1"}),Object(v.jsx)("input",{type:"text",name:"itemA",placeholder:"A\uc548",value:o,onChange:F}),Object(v.jsx)("input",{type:"file",name:"fileA",accept:"image/*",onChange:Q}),y&&Object(v.jsxs)("div",{className:"preview-image",children:[Object(v.jsx)("img",{src:y,alt:"A\uc548 \uc774\ubbf8\uc9c0"}),Object(v.jsx)("button",{name:"cancelImageA",onClick:P,children:"Cancel"})]})]}),Object(v.jsxs)("div",{className:"select-items__input",children:[Object(v.jsx)("span",{className:"label",children:"\uc120\ud0dd1"}),Object(v.jsx)("input",{type:"text",name:"itemB",placeholder:"B\uc548",value:h,onChange:F}),Object(v.jsx)("input",{type:"file",name:"fileB",accept:"image/*",onChange:Q}),U&&Object(v.jsxs)("div",{className:"preview-image",children:[Object(v.jsx)("img",{src:U,alt:"B\uc548 \uc774\ubbf8\uc9c0"}),Object(v.jsx)("button",{name:"cancelImageB",onClick:P,children:"Cancel"})]})]})]}),Object(v.jsx)("input",{type:"submit",value:"question"})]}),Object(v.jsx)("div",{children:k.map((function(e){return Object(v.jsx)(w,{questionObj:e,userObj:t},e.id)}))})]})},N=function(){return Object(v.jsx)("span",{children:"Profile"})},k=function(){return Object(v.jsxs)("nav",{className:"header",children:[Object(v.jsxs)("ul",{className:"header__menu",children:[Object(v.jsx)("li",{className:"header__menu-item",children:Object(v.jsx)(u.b,{to:"/",children:"Home"})}),Object(v.jsx)("li",{className:"header__menu-item",children:Object(v.jsx)(u.b,{to:"/profile",children:"Profile"})})]}),Object(v.jsx)("input",{type:"button",className:"header__logout",value:"Log Out",onClick:function(){O.signOut()}})]})},C=function(){var e=Object(c.useState)(""),t=Object(r.a)(e,2),n=t[0],a=t[1],i=Object(c.useState)(""),s=Object(r.a)(i,2),u=s[0],l=s[1],o=Object(c.useState)(!1),b=Object(r.a)(o,2),d=b[0],f=b[1],h=Object(c.useState)(""),x=Object(r.a)(h,2),g=x[0],w=x[1],A=function(e){var t=e.target,n=t.name,c=t.value;"email"===n?a(c):"password"===n&&l(c)},N=function(){var e=Object(m.a)(j.a.mark((function e(t){var n,c,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.target.name,e.prev=1,"google"===n?c=new p.GoogleAuthProvider:"github"===n&&(c=new p.GithubAuthProvider),e.next=5,O.signInWithPopup(c);case 5:a=e.sent,console.log(a),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0.message);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=Object(m.a)(j.a.mark((function e(t){var c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),e.prev=1,!d){e.next=8;break}return e.next=5,O.createUserWithEmailAndPassword(n,u);case 5:c=e.sent,e.next=11;break;case 8:return e.next=10,O.signInWithEmailAndPassword(n,u);case 10:c=e.sent;case 11:console.log(c),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),w(e.t0.message);case 17:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(t){return e.apply(this,arguments)}}();return Object(v.jsxs)("div",{className:"auth-main main",children:[Object(v.jsx)("h1",{className:"login-title",children:"Login"}),Object(v.jsxs)("form",{className:"signin-form",onSubmit:k,children:[Object(v.jsx)("input",{type:"text",name:"email",value:n,onChange:A,placeholder:"Email Address *",className:"signin-form__email",required:!0}),Object(v.jsx)("input",{type:"password",name:"password",value:u,onChange:A,placeholder:"Password *",className:"signin-form__password",required:!0}),Object(v.jsx)("input",{type:"submit",value:d?"\ud68c\uc6d0\uac00\uc785":"\ub85c\uadf8\uc778",className:"signin-form__submit"}),Object(v.jsx)("div",{children:g})]}),Object(v.jsxs)("div",{className:"social-login",children:[Object(v.jsx)("button",{className:"social-login__google",name:"google",onClick:N,children:"Continue with Google"}),Object(v.jsx)("button",{className:"social-login__github",name:"github",onClick:N,children:"Continue with Github"})]}),Object(v.jsx)("span",{className:"toggle-account",onClick:function(){return f(!d)},children:d?"\ub85c\uadf8\uc778":"\ud68c\uc6d0\uac00\uc785"})]})},S=function(e){var t=e.isLoggedIn,n=e.userObj;return Object(v.jsxs)(u.a,{children:[t?Object(v.jsx)(k,{}):"",Object(v.jsx)(l.d,{children:t?Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(l.b,{exact:!0,path:"/",children:Object(v.jsx)(A,{userObj:n})}),Object(v.jsx)(l.b,{exact:!0,path:"/profile",children:Object(v.jsx)(N,{})}),Object(v.jsx)(l.a,{from:"/*",to:"/"})]}):Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(l.b,{exact:!0,path:"/",children:Object(v.jsx)(C,{})}),Object(v.jsx)(l.a,{from:"/*",to:"/"})]})})]})};var B=function(){var e=Object(c.useState)(!1),t=Object(r.a)(e,2),n=t[0],a=t[1],i=Object(c.useState)(O.currentUser),s=Object(r.a)(i,2),u=s[0],l=s[1],o=Object(c.useState)(null),j=Object(r.a)(o,2),m=j[0],b=j[1];return Object(c.useEffect)((function(){O.onAuthStateChanged((function(e){e?(l(!0),b(e)):l(!1),a(!0)}))})),Object(v.jsx)(v.Fragment,{children:n?Object(v.jsx)(S,{isLoggedIn:u,userObj:m}):"Loading..."})};n(45);s.a.render(Object(v.jsx)(a.a.StrictMode,{children:Object(v.jsx)(B,{})}),document.getElementById("root"))}},[[46,1,2]]]);
//# sourceMappingURL=main.f0668ddf.chunk.js.map