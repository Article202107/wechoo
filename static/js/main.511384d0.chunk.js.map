{"version":3,"sources":["fbase.js","routes/QuestionForm.js","routes/Question.js","routes/Home.js","routes/Profile.js","components/Navigation.js","routes/Auth.js","components/Router.js","components/App.js","index.js"],"names":["firebase","initializeApp","apiKey","process","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","authInstance","auth","authService","dbService","firestore","storageService","storage","QuestionForm","userObj","questionObj","toggleEdit","useState","question","setQuestion","newQuestion","setNewQuestion","newItemA","setNewItemA","newItemB","setNewItemB","itemA","setItemA","itemB","setItemB","attachImageA","setAttachImageA","attachImageB","setAttachImageB","useEffect","document","querySelector","value","clearImages","a","imageUrlA","refFromURL","delete","imageUrlB","onChange","event","target","name","imageUpload","attachImage","downloadUrl","imageUploadRef","ref","child","uid","uuidv4","putString","result","getDownloadURL","onSubmit","preventDefault","collection","doc","id","update","add","creator","createAt","Date","now","onFileChange","theFile","files","reader","FileReader","onloadend","loadFile","currentTarget","readAsDataURL","cancelImage","fileSelector","className","placeholder","type","required","accept","src","alt","onClick","Question","isOwner","isEditing","setIsEditing","pickCount","setPickCount","answerList","setAnswerList","onDelete","window","confirm","prev","where","onSnapshot","snapshot","docs","map","data","pickCountA","filter","answer","pickCode","length","pickCountB","onPick","find","alert","qid","Home","isReg","setIsReg","questions","setQuestions","orderBy","toggleNew","Profile","Navigation","to","signOut","Auth","email","setEmail","password","setPasssword","newAccount","setNewAccount","error","setError","goSocialAuth","provider","GoogleAuthProvider","GithubAuthProvider","signInWithPopup","console","log","message","createUserWithEmailAndPassword","signInWithEmailAndPassword","icon","faGoogle","faGithub","AppRouter","isLoggedIn","exact","path","from","App","init","setInit","currentUser","setIsLoggedIn","setUserObj","onAuthStateChanged","user","ReactDOM","render","StrictMode","getElementById"],"mappings":"0NAgBAA,IAASC,cAXc,CACrBC,OAAQC,0CACRC,WAAYD,+BACZE,UAAWF,eACXG,cAAeH,2BACfI,kBAAmBJ,eACnBK,MAAOL,4CACPM,cAAeN,iBAMV,IAAMO,EAAeV,IAASW,KACxBC,EAAcZ,IAASW,OACvBE,EAAYb,IAASc,YACrBC,EAAiBf,IAASgB,U,uCC2NxBC,EA5OM,SAAC,GAAwD,IAAtDC,EAAqD,EAArDA,QAAqD,IAA5CC,mBAA4C,MAA9B,KAA8B,MAAxBC,kBAAwB,MAAX,KAAW,EAC3E,EAAgCC,mBAAS,IAAzC,mBAAOC,EAAP,KAAiBC,EAAjB,KACA,EAAsCF,mBAAS,IAA/C,mBAAOG,EAAP,KAAoBC,EAApB,KACA,EAAgCJ,mBAAS,IAAzC,mBAAOK,EAAP,KAAiBC,EAAjB,KACA,EAAgCN,mBAAS,IAAzC,mBAAOO,EAAP,KAAiBC,EAAjB,KACA,EAA0BR,mBAAS,IAAnC,mBAAOS,EAAP,KAAcC,EAAd,KACA,EAA0BV,mBAAS,IAAnC,mBAAOW,EAAP,KAAcC,EAAd,KACA,EAAwCZ,mBAAS,IAAjD,mBAAOa,EAAP,KAAqBC,EAArB,KACA,EAAwCd,mBAAS,IAAjD,mBAAOe,EAAP,KAAqBC,EAArB,KAEAC,qBAAU,WACJnB,IACFM,EAAeN,EAAYG,UAC3BK,EAAYR,EAAYW,OACxBD,EAAYV,EAAYa,OACxBG,EAAgB,IAChBE,EAAgB,IAChBE,SAASC,cAAc,uBAAuBC,MAAQ,KACtDF,SAASC,cAAc,uBAAuBC,MAAQ,QAEvD,CAACtB,IAEJ,IAAMuB,EAAW,uCAAG,sBAAAC,EAAA,0DACdxB,EAAYyB,YAAaV,EADX,gCAEVnB,EAAe8B,WAAW1B,EAAYyB,WAAWE,SAFvC,WAId3B,EAAY4B,YAAaX,EAJX,gCAKVrB,EAAe8B,WAAW1B,EAAY4B,WAAWD,SALvC,2CAAH,qDASXE,EAAW,SAACC,GAChB,MAEIA,EADFC,OAAUC,EADZ,EACYA,KAAMV,EADlB,EACkBA,MAGdtB,EACW,aAATgC,EACF1B,EAAegB,GACG,UAATU,EACTxB,EAAYc,GACM,UAATU,GACTtB,EAAYY,GAGD,aAATU,EACF5B,EAAYkB,GACM,UAATU,EACTpB,EAASU,GACS,UAATU,GACTlB,EAASQ,IAMTW,EAAW,uCAAG,WAAOC,GAAP,mBAAAV,EAAA,yDACdW,EAAc,IAEdD,EAHc,uBAIVE,EAAiBxC,EACpByC,MACAC,MAFoB,iBAEJvC,EAAQwC,IAFJ,YAEWC,gBANlB,SAQKJ,EAAeK,UAAUP,EAAa,YAR3C,cAQVQ,EARU,gBASIA,EAAOL,IAAIM,iBATf,OAShBR,EATgB,uCAWXA,GAXW,4CAAH,sDAcXS,EAAQ,uCAAG,WAAOd,GAAP,iBAAAN,EAAA,6DACfM,EAAMe,iBADS,SAISZ,EAAYlB,GAJrB,cAITU,EAJS,gBAKSQ,EAAYhB,GALrB,UAKTW,EALS,QAOX5B,EAPW,kCASPuB,IATO,yBAWP7B,EACHoD,WAAW,YACXC,IAAI/C,EAAYgD,IAChBC,OAAO,CACN9C,SAAUE,EACVM,MAAOJ,EACPM,MAAOJ,EACPgB,UAAWA,GAAwBzB,EAAYyB,UAC/CG,UAAWA,GAAwB5B,EAAY4B,YAnBtC,QAqBb3B,IArBa,yCAuBPP,EAAUoD,WAAW,YAAYI,IAAI,CACzC/C,WACAQ,QACAc,YACAZ,QACAe,YACAuB,QAASpD,EAAQwC,IACjBa,SAAUC,KAAKC,QA9BJ,QAiCblD,EAAY,IACZY,EAAgB,MAChBE,EAAgB,MAChBE,SAASC,cAAc,uBAAuBC,MAAQ,KACtDF,SAASC,cAAc,uBAAuBC,MAAQ,KArCzC,4CAAH,sDAyCRiC,EAAe,SAACzB,GACpB,MAEIA,EADFC,OAAUC,EADZ,EACYA,KAENwB,EAHN,EACkBC,MAEI,GAChBC,EAAS,IAAIC,WAEnBD,EAAOE,UAAY,SAACC,GAClB,IACmBnB,EACfmB,EADFC,cAAiBpB,OAGN,UAATV,EACFhB,EAAgB0B,GACE,UAATV,GACTd,EAAgBwB,IAMpBgB,EAAOK,cAAcP,IAGjBQ,EAAc,SAAClC,GACnBA,EAAMe,iBAEN,IAIIoB,EAHQjC,EACRF,EADFC,OAAUC,KAIC,iBAATA,GACFiC,EAAe7C,SAASC,cAAc,uBACtCL,EAAgB,OACE,iBAATgB,IACTiC,EAAe7C,SAASC,cAAc,uBACtCH,EAAgB,OAElB+C,EAAa3C,MAAQ,MAGvB,OACE,uBAAM4C,UAAU,gBAAgBtB,SAAUA,EAA1C,UACE,uBACEZ,KAAK,WACLmC,YAAY,UACZ7C,MAAOtB,EAAcK,EAAcF,EACnC0B,SAAUA,EACVqC,UAAU,iBACVE,KAAK,OACLC,UAAQ,IAEV,qBAAKH,UAAU,aACf,sBAAKA,UAAU,qCAAf,UACE,sBAAKA,UAAU,sBAAf,UACE,uBACEE,KAAK,OACLpC,KAAK,QACLkC,UAAU,mBACVC,YAAY,kBACZ7C,MAAOtB,EAAcO,EAAWI,EAChCkB,SAAUA,EACVwC,UAAQ,IAEV,uBACED,KAAK,OACLpC,KAAK,QACLkC,UAAU,oBACVI,OAAO,UACPH,YAAY,4BACZtC,SAAU0B,IAEXxC,GACC,sBAAKmD,UAAU,gBAAf,UACE,qBAAKK,IAAKxD,EAAcyD,IAAI,+BAC5B,wBAAQxC,KAAK,eAAeyC,QAAST,EAArC,0BAMN,qBAAKE,UAAU,aACf,sBAAKA,UAAU,sBAAf,UACE,uBACEE,KAAK,OACLpC,KAAK,QACLkC,UAAU,mBACVC,YAAY,kBACZ7C,MAAOtB,EAAcS,EAAWI,EAChCgB,SAAUA,EACVwC,UAAQ,IAEV,uBACED,KAAK,OACLpC,KAAK,QACLkC,UAAU,oBACVI,OAAO,UACPH,YAAY,4BACZtC,SAAU0B,IAEXtC,GACC,sBAAKiD,UAAU,gBAAf,UACE,qBAAKK,IAAKtD,EAAcuD,IAAI,+BAC5B,wBAAQxC,KAAK,eAAeyC,QAAST,EAArC,6BAOR,sBAAKE,UAAU,mBAAf,UACE,wBAAQA,UAAU,kBAAkBO,QAASxE,EAA7C,2BAGA,uBACEiE,UAAU,kBACVE,KAAK,SACL9C,MAAOtB,EAAc,eAAO,yBC3HvB0E,EA1GE,SAAC,GAA8B,IAA5B1E,EAA2B,EAA3BA,YAAaD,EAAc,EAAdA,QACzB4E,EAAU3E,EAAYmD,UAAYpD,EAAQwC,IAChD,EAAkCrC,oBAAS,GAA3C,mBAAO0E,EAAP,KAAkBC,EAAlB,KACA,EAAkC3E,mBAAS,IAA3C,mBAAO4E,EAAP,KAAkBC,EAAlB,KACA,EAAoC7E,mBAAS,IAA7C,mBAAO8E,EAAP,KAAmBC,EAAnB,KAEMC,EAAQ,uCAAG,sBAAA1D,EAAA,0DACJ2D,OAAOC,QAAQ,qDADX,gCAGP1F,EAAUoD,WAAW,YAAYC,IAAI/C,EAAYgD,IAAIrB,SAH9C,uBAIPJ,IAJO,2CAAH,qDAQRA,EAAW,uCAAG,sBAAAC,EAAA,0DACdxB,EAAYyB,UADE,gCAEV7B,EAAe8B,WAAW1B,EAAYyB,WAAWE,SAFvC,WAId3B,EAAY4B,UAJE,gCAKVhC,EAAe8B,WAAW1B,EAAY4B,WAAWD,SALvC,2CAAH,qDAUX1B,EAAa,WACjB4E,GAAa,SAACQ,GAAD,OAAWA,MAG1BlE,qBAAU,WACRzB,EACGoD,WAAW,UACXwC,MAAM,MAAO,KAAMtF,EAAYgD,IAC/BuC,YAAW,SAACC,GACX,IAAM9C,EAAS8C,EAASC,KAAKC,KAAI,SAAC3C,GAAD,oBAC/BC,GAAID,EAAIC,IACLD,EAAI4C,WAGTV,EAAcvC,GAEdqC,EAAa,CACXa,WAAYlD,EAAOmD,QAAO,SAACC,GAAD,MAAgC,MAApBA,EAAOC,YAAkBC,OAC/DC,WAAYvD,EAAOmD,QAAO,SAACC,GAAD,MAAgC,MAApBA,EAAOC,YAAkBC,cAGpE,CAAChG,EAAYgD,KAEhB,IAAMkD,EAAM,uCAAG,WAAOH,GAAP,SAAAvE,EAAA,0DACTwD,EAAWmB,MAAK,qBAAG5D,MAAkBxC,EAAQwC,OADpC,uBAEX6D,MAAM,4DAFK,0CAMP1G,EAAUoD,WAAW,UAAUI,IAAI,CACvCmD,IAAKrG,EAAYgD,GACjBT,IAAKxC,EAAQwC,IACbwD,WACA3C,SAAUC,KAAKC,QAVJ,2CAAH,sDAcZ,OACE,mCACGsB,EACC,cAAC,EAAD,CACE7E,QAASA,EACTC,YAAaA,EACbC,WAAYA,IAGd,sBAAKiE,UAAU,gBAAf,UACE,sBAAMA,UAAU,kBAAhB,SAAmClE,EAAYG,WAC/C,sBAAK+D,UAAU,kBAAf,UACE,sBAAKO,QAAS,kBAAMyB,EAAO,MAAMhC,UAAU,aAA3C,UACE,qBACEA,UAAU,aACVK,IAAKvE,EAAYyB,UACjB+C,IAAI,+BAEN,sBAAMN,UAAU,aAAhB,SAA8BY,EAAUc,aACxC,sBAAM1B,UAAU,YAAhB,SAA6BlE,EAAYW,WAE3C,sBAAK8D,QAAS,kBAAMyB,EAAO,MAAMhC,UAAU,aAA3C,UACE,qBACEA,UAAU,aACVK,IAAKvE,EAAY4B,UACjB4C,IAAI,+BAEN,sBAAMN,UAAU,aAAhB,SAA8BY,EAAUmB,aACxC,sBAAM/B,UAAU,YAAhB,SAA6BlE,EAAYa,cAG7C,qBAAKqD,UAAU,gBAAf,SACGS,GACC,sBAAKT,UAAU,eAAf,UACE,wBAAQO,QAASS,EAAjB,0BACA,wBAAQT,QAASxE,EAAjB,qCC9CDqG,EAjDF,SAAC,GAAiB,IAAfvG,EAAc,EAAdA,QACd,EAA0BG,oBAAS,GAAnC,mBAAOqG,EAAP,KAAcC,EAAd,KACA,EAAkCtG,mBAAS,IAA3C,mBAAOuG,EAAP,KAAkBC,EAAlB,KAEAvF,qBAAU,WACRzB,EACGoD,WAAW,YACX6D,QAAQ,WAAY,QACpBpB,YAAW,SAACC,GACX,IAAMC,EAAOD,EAASC,KAAKC,KAAI,SAAC3C,GAAD,mBAAC,aAC9BC,GAAID,EAAIC,IACLD,EAAI4C,QAFsB,IAG7BC,WAAY,EACZK,WAAY,OAGdS,EAAajB,QAEhB,IAEH,IAAMmB,EAAY,WAChBJ,GAAS,SAACnB,GAAD,OAAWA,MAGtB,OACE,sCACIkB,GACA,qBAAKrC,UAAU,aAAf,SACE,wBAAQA,UAAU,uBAAuBO,QAASmC,EAAlD,mBAKJ,sBAAK1C,UAAU,iBAAf,UACGqC,GAAS,cAAC,EAAD,CAAcxG,QAASA,EAASE,WAAY2G,IACtD,8BACGH,EAAUf,KAAI,SAACvF,GAAD,OACb,cAAC,EAAD,CAEEH,YAAaG,EACbJ,QAASA,GAFJI,EAAS6C,gBCxCb6D,EADC,kBAAM,4CCwBPC,EAtBI,WAKjB,OACE,sBAAK5C,UAAU,SAAf,UACE,qBAAIA,UAAU,eAAd,UACE,oBAAIA,UAAU,oBAAd,SACE,cAAC,IAAD,CAAM6C,GAAG,IAAT,oBAEF,oBAAI7C,UAAU,oBAAd,SACE,cAAC,IAAD,CAAM6C,GAAG,WAAT,0BAGJ,sBAAM7C,UAAU,iBAAiBO,QAdpB,WACfhF,EAAYuH,WAaV,yB,gBCoGSC,EAhHF,WACX,MAA0B/G,mBAAS,IAAnC,mBAAOgH,EAAP,KAAcC,EAAd,KACA,EAAiCjH,mBAAS,IAA1C,mBAAOkH,EAAP,KAAiBC,EAAjB,KACA,EAAoCnH,oBAAS,GAA7C,mBAAOoH,EAAP,KAAmBC,EAAnB,KACA,EAA0BrH,mBAAS,IAAnC,mBAAOsH,EAAP,KAAcC,EAAd,KAEM5F,EAAW,SAACC,GAChB,MAEIA,EADFC,OAAUC,EADZ,EACYA,KAAMV,EADlB,EACkBA,MAGL,UAATU,EACFmF,EAAS7F,GACS,aAATU,GACTqF,EAAa/F,IAIXoG,EAAY,uCAAG,WAAO5F,GAAP,mBAAAN,EAAA,6DAEPQ,EACRF,EADFC,OAAUC,KAFO,SAOJ,WAATA,EACF2F,EAAW,IAAIpI,EAAaqI,mBACV,WAAT5F,IACT2F,EAAW,IAAIpI,EAAasI,oBAVb,SAYEpI,EAAYqI,gBAAgBH,GAZ9B,OAYXhC,EAZW,OAajBoC,QAAQC,IAAIrC,GAbK,gDAgBjBoC,QAAQC,IAAI,KAAMC,SAhBD,yDAAH,sDAoBZrF,EAAQ,uCAAG,WAAOd,GAAP,eAAAN,EAAA,yDACfM,EAAMe,iBADS,UAITyE,EAJS,gCAKE7H,EAAYyI,+BACvBhB,EACAE,GAPS,OAKXzB,EALW,+CAUElG,EAAY0I,2BAA2BjB,EAAOE,GAVhD,QAUXzB,EAVW,eAYboC,QAAQC,IAAIrC,GAZC,kDAcb8B,EAAS,KAAMQ,SAdF,0DAAH,sDAoBd,OACE,sBAAK/D,UAAU,iBAAf,UACE,oBAAIA,UAAU,cAAd,mBACA,uBAAMA,UAAU,cAActB,SAAUA,EAAxC,UACE,uBACEwB,KAAK,OACLpC,KAAK,QACLV,MAAO4F,EACPrF,SAAUA,EACVsC,YAAY,kBACZD,UAAU,qBACVG,UAAQ,IAEV,uBACED,KAAK,WACLpC,KAAK,WACLV,MAAO8F,EACPvF,SAAUA,EACVsC,YAAY,aACZD,UAAU,wBACVG,UAAQ,IAEV,uBACED,KAAK,SACL9C,MAAOgG,EAAa,2BAAS,qBAC7BpD,UAAU,wBAEZ,8BAAMsD,OAER,sBAAKtD,UAAU,eAAf,UACE,yBACEA,UAAU,uBACVlC,KAAK,SACLyC,QAASiD,EAHX,UAKE,cAAC,IAAD,CAAiBU,KAAMC,IAAUnE,UAAU,aAL7C,0BAQA,yBACEA,UAAU,uBACVlC,KAAK,SACLyC,QAASiD,EAHX,UAKE,cAAC,IAAD,CAAiBU,KAAME,MALzB,6BASF,sBAAMpE,UAAU,iBAAiBO,QAjDf,kBAAM8C,GAAeD,IAiDvC,SACGA,EAAa,qBAAQ,iCCxEfiB,EA5BG,SAAC,GAA6B,IAA3BC,EAA0B,EAA1BA,WAAYzI,EAAc,EAAdA,QAC/B,OACE,eAAC,IAAD,WACGyI,EAAa,cAAC,EAAD,IAA4B,GAC1C,cAAC,IAAD,UACGA,EACC,qCACE,cAAC,IAAD,CAAOC,OAAK,EAACC,KAAK,IAAlB,SACE,cAAC,EAAD,CAAM3I,QAASA,MAEjB,cAAC,IAAD,CAAO0I,OAAK,EAACC,KAAK,WAAlB,SACE,cAAC,EAAD,MAEF,cAAC,IAAD,CAAUC,KAAK,KAAK5B,GAAG,SAGzB,qCACE,cAAC,IAAD,CAAO0B,OAAK,EAACC,KAAK,IAAlB,SACE,cAAC,EAAD,MAEF,cAAC,IAAD,CAAUC,KAAK,KAAK5B,GAAG,eCApB6B,MA7Bf,WACE,MAAwB1I,oBAAS,GAAjC,mBAAO2I,EAAP,KAAaC,EAAb,KACA,EAAoC5I,mBAAST,EAAYsJ,aAAzD,mBAAOP,EAAP,KAAmBQ,EAAnB,KACA,EAA8B9I,mBAAS,MAAvC,mBAAOH,EAAP,KAAgBkJ,EAAhB,KAeA,OAbA9H,qBAAU,WACR1B,EAAYyJ,oBAAmB,SAACC,GAE1BA,GACFH,GAAc,GACdC,EAAWE,IAEXH,GAAc,GAEhBF,GAAQ,SAKV,mCACGD,EACC,cAAC,EAAD,CAAWL,WAAYA,EAAYzI,QAASA,IAE5C,gB,MCtBRqJ,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEFlI,SAASmI,eAAe,W","file":"static/js/main.511384d0.chunk.js","sourcesContent":["import firebase from \"firebase/app\";\nimport \"firebase/auth\";\nimport \"firebase/firestore\";\nimport \"firebase/storage\";\n\nconst firebaseConfig = {\n  apiKey: process.env.REACT_APP_API_KEY,\n  authDomain: process.env.REACT_APP_AUTH_DOMAIN,\n  projectId: process.env.REACT_APP_PROJECT_ID,\n  storageBucket: process.env.REACT_APP_STORAGE_BUCKET,\n  messagingSenderId: process.env.REACT_APP_MESSAGING_SENDER_ID,\n  appId: process.env.REACT_APP_API_ID,\n  measurementId: process.env.REACT_APP_MEASUREMENT_ID,\n};\n\n// Initialize Firebase\nfirebase.initializeApp(firebaseConfig);\n\nexport const authInstance = firebase.auth;\nexport const authService = firebase.auth();\nexport const dbService = firebase.firestore();\nexport const storageService = firebase.storage();\n","import { useState, useEffect } from \"react\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport { dbService, storageService } from \"fbase\";\n\nconst QuestionForm = ({ userObj, questionObj = null, toggleEdit = null }) => {\n  const [question, setQuestion] = useState(\"\");\n  const [newQuestion, setNewQuestion] = useState(\"\");\n  const [newItemA, setNewItemA] = useState(\"\");\n  const [newItemB, setNewItemB] = useState(\"\");\n  const [itemA, setItemA] = useState(\"\");\n  const [itemB, setItemB] = useState(\"\");\n  const [attachImageA, setAttachImageA] = useState(\"\");\n  const [attachImageB, setAttachImageB] = useState(\"\");\n\n  useEffect(() => {\n    if (questionObj) {\n      setNewQuestion(questionObj.question);\n      setNewItemA(questionObj.itemA);\n      setNewItemB(questionObj.itemB);\n      setAttachImageA(\"\");\n      setAttachImageB(\"\");\n      document.querySelector(\"input[name='fileA']\").value = null;\n      document.querySelector(\"input[name='fileB']\").value = null;\n    }\n  }, [questionObj]);\n\n  const clearImages = async () => {\n    if (questionObj.imageUrlA && attachImageA) {\n      await storageService.refFromURL(questionObj.imageUrlA).delete();\n    }\n    if (questionObj.imageUrlB && attachImageB) {\n      await storageService.refFromURL(questionObj.imageUrlB).delete();\n    }\n  };\n\n  const onChange = (event) => {\n    const {\n      target: { name, value },\n    } = event;\n\n    if (questionObj) {\n      if (name === \"question\") {\n        setNewQuestion(value);\n      } else if (name === \"itemA\") {\n        setNewItemA(value);\n      } else if (name === \"itemB\") {\n        setNewItemB(value);\n      }\n    } else {\n      if (name === \"question\") {\n        setQuestion(value);\n      } else if (name === \"itemA\") {\n        setItemA(value);\n      } else if (name === \"itemB\") {\n        setItemB(value);\n      }\n    }\n  };\n\n  //Firebase Image upload function\n  const imageUpload = async (attachImage) => {\n    let downloadUrl = \"\";\n\n    if (attachImage) {\n      const imageUploadRef = storageService\n        .ref()\n        .child(`images/${userObj.uid}/${uuidv4()}`);\n\n      const result = await imageUploadRef.putString(attachImage, \"data_url\");\n      downloadUrl = await result.ref.getDownloadURL();\n    }\n    return downloadUrl;\n  };\n\n  const onSubmit = async (event) => {\n    event.preventDefault();\n\n    //upload image\n    const imageUrlA = await imageUpload(attachImageA);\n    const imageUrlB = await imageUpload(attachImageB);\n\n    if (questionObj) {\n      //수정 요청인 경우 - 기존 이미지 삭제\n      await clearImages();\n\n      await dbService\n        .collection(\"Question\")\n        .doc(questionObj.id)\n        .update({\n          question: newQuestion,\n          itemA: newItemA,\n          itemB: newItemB,\n          imageUrlA: imageUrlA ? imageUrlA : questionObj.imageUrlA,\n          imageUrlB: imageUrlB ? imageUrlB : questionObj.imageUrlB,\n        });\n      toggleEdit();\n    } else {\n      await dbService.collection(\"Question\").add({\n        question,\n        itemA,\n        imageUrlA,\n        itemB,\n        imageUrlB,\n        creator: userObj.uid,\n        createAt: Date.now(),\n      });\n\n      setQuestion(\"\");\n      setAttachImageA(null);\n      setAttachImageB(null);\n      document.querySelector(\"input[name='fileA']\").value = null;\n      document.querySelector(\"input[name='fileB']\").value = null;\n    }\n  };\n\n  const onFileChange = (event) => {\n    const {\n      target: { name, files },\n    } = event;\n    const theFile = files[0];\n    const reader = new FileReader();\n\n    reader.onloadend = (loadFile) => {\n      const {\n        currentTarget: { result },\n      } = loadFile;\n\n      if (name === \"fileA\") {\n        setAttachImageA(result);\n      } else if (name === \"fileB\") {\n        setAttachImageB(result);\n      }\n\n      //console.log(attachImageA);\n    };\n\n    reader.readAsDataURL(theFile);\n  };\n\n  const cancelImage = (event) => {\n    event.preventDefault();\n\n    const {\n      target: { name },\n    } = event;\n\n    let fileSelector;\n    if (name === \"cancelImageA\") {\n      fileSelector = document.querySelector(\"input[name='fileA']\");\n      setAttachImageA(null);\n    } else if (name === \"cancelImageB\") {\n      fileSelector = document.querySelector(\"input[name='fileB']\");\n      setAttachImageB(null);\n    }\n    fileSelector.value = null;\n  };\n\n  return (\n    <form className=\"form-question\" onSubmit={onSubmit}>\n      <input\n        name=\"question\"\n        placeholder=\"Title *\"\n        value={questionObj ? newQuestion : question}\n        onChange={onChange}\n        className=\"question-title\"\n        type=\"text\"\n        required\n      />\n      <div className=\"div-line\"></div>\n      <div className=\"form-question__select select-items\">\n        <div className=\"select-items__input\">\n          <input\n            type=\"text\"\n            name=\"itemA\"\n            className=\"item__input-text\"\n            placeholder=\"선택1 *\"\n            value={questionObj ? newItemA : itemA}\n            onChange={onChange}\n            required\n          />\n          <input\n            type=\"file\"\n            name=\"fileA\"\n            className=\"item__file-attach\"\n            accept=\"image/*\"\n            placeholder=\"첨부파일1\"\n            onChange={onFileChange}\n          />\n          {attachImageA && (\n            <div className=\"preview-image\">\n              <img src={attachImageA} alt=\"A안 이미지\" />\n              <button name=\"cancelImageA\" onClick={cancelImage}>\n                Cancel\n              </button>\n            </div>\n          )}\n        </div>\n        <div className=\"div-line\"></div>\n        <div className=\"select-items__input\">\n          <input\n            type=\"text\"\n            name=\"itemB\"\n            className=\"item__input-text\"\n            placeholder=\"선택2 *\"\n            value={questionObj ? newItemB : itemB}\n            onChange={onChange}\n            required\n          />\n          <input\n            type=\"file\"\n            name=\"fileB\"\n            className=\"item__file-attach\"\n            accept=\"image/*\"\n            placeholder=\"첨부파일2\"\n            onChange={onFileChange}\n          />\n          {attachImageB && (\n            <div className=\"preview-image\">\n              <img src={attachImageB} alt=\"B안 이미지\" />\n              <button name=\"cancelImageB\" onClick={cancelImage}>\n                Cancel\n              </button>\n            </div>\n          )}\n        </div>\n      </div>\n      <div className=\"question-buttons\">\n        <button className=\"question-cancel\" onClick={toggleEdit}>\n          취 소\n        </button>\n        <input\n          className=\"question-submit\"\n          type=\"submit\"\n          value={questionObj ? \"수정\" : \"등 록\"}\n        />\n      </div>\n    </form>\n  );\n};\n\nexport default QuestionForm;\n","import React, { useState, useEffect } from \"react\";\nimport { dbService, storageService } from \"fbase\";\nimport QuestionForm from \"./QuestionForm\";\n\nconst Question = ({ questionObj, userObj }) => {\n  const isOwner = questionObj.creator === userObj.uid;\n  const [isEditing, setIsEditing] = useState(false);\n  const [pickCount, setPickCount] = useState({});\n  const [answerList, setAnswerList] = useState([]);\n\n  const onDelete = async () => {\n    const ok = window.confirm(\"삭제하시겠습니까?\");\n    if (ok) {\n      await dbService.collection(\"Question\").doc(questionObj.id).delete();\n      await clearImages();\n    }\n  };\n\n  const clearImages = async () => {\n    if (questionObj.imageUrlA) {\n      await storageService.refFromURL(questionObj.imageUrlA).delete();\n    }\n    if (questionObj.imageUrlB) {\n      await storageService.refFromURL(questionObj.imageUrlB).delete();\n    }\n  };\n\n  //\n  const toggleEdit = () => {\n    setIsEditing((prev) => !prev);\n  };\n\n  useEffect(() => {\n    dbService\n      .collection(\"Answer\")\n      .where(\"qid\", \"==\", questionObj.id)\n      .onSnapshot((snapshot) => {\n        const result = snapshot.docs.map((doc) => ({\n          id: doc.id,\n          ...doc.data(),\n        }));\n\n        setAnswerList(result);\n        //console.log(answerCount);\n        setPickCount({\n          pickCountA: result.filter((answer) => answer.pickCode === \"A\").length,\n          pickCountB: result.filter((answer) => answer.pickCode === \"B\").length,\n        });\n      });\n  }, [questionObj.id]);\n\n  const onPick = async (pickCode) => {\n    if (answerList.find(({ uid }) => uid === userObj.uid)) {\n      alert(\"이미 선택하셨습니다.\");\n      return;\n    }\n\n    await dbService.collection(\"Answer\").add({\n      qid: questionObj.id,\n      uid: userObj.uid,\n      pickCode,\n      createAt: Date.now(),\n    });\n  };\n\n  return (\n    <>\n      {isEditing ? (\n        <QuestionForm\n          userObj={userObj}\n          questionObj={questionObj}\n          toggleEdit={toggleEdit}\n        />\n      ) : (\n        <div className=\"question-card\">\n          <span className=\"question__title\">{questionObj.question}</span>\n          <div className=\"question__items\">\n            <div onClick={() => onPick(\"A\")} className=\"quest-item\">\n              <img\n                className=\"item-image\"\n                src={questionObj.imageUrlA}\n                alt=\"A안 이미지\"\n              />\n              <span className=\"item-count\">{pickCount.pickCountA}</span>\n              <span className=\"item-desc\">{questionObj.itemA}</span>\n            </div>\n            <div onClick={() => onPick(\"B\")} className=\"quest-item\">\n              <img\n                className=\"item-image\"\n                src={questionObj.imageUrlB}\n                alt=\"B안 이미지\"\n              />\n              <span className=\"item-count\">{pickCount.pickCountB}</span>\n              <span className=\"item-desc\">{questionObj.itemB}</span>\n            </div>\n          </div>\n          <div className=\"question-edit\">\n            {isOwner && (\n              <div className=\"edit-buttons\">\n                <button onClick={onDelete}>삭제</button>\n                <button onClick={toggleEdit}>수정</button>\n              </div>\n            )}\n          </div>\n        </div>\n      )}\n    </>\n  );\n};\n\nexport default Question;\n","import React, { useState, useEffect } from \"react\";\nimport { dbService } from \"fbase\";\nimport Question from \"./Question\";\nimport QuestionForm from \"./QuestionForm\";\n\nconst Home = ({ userObj }) => {\n  const [isReg, setIsReg] = useState(false);\n  const [questions, setQuestions] = useState([]);\n\n  useEffect(() => {\n    dbService\n      .collection(\"Question\")\n      .orderBy(\"createAt\", \"desc\")\n      .onSnapshot((snapshot) => {\n        const docs = snapshot.docs.map((doc) => ({\n          id: doc.id,\n          ...doc.data(),\n          pickCountA: 0,\n          pickCountB: 0,\n        }));\n\n        setQuestions(docs);\n      });\n  }, []);\n\n  const toggleNew = () => {\n    setIsReg((prev) => !prev);\n  };\n\n  return (\n    <>\n      {!isReg && (\n        <div className=\"sub-header\">\n          <button className=\"reg-button__question\" onClick={toggleNew}>\n            Add\n          </button>\n        </div>\n      )}\n      <div className=\"home-main main\">\n        {isReg && <QuestionForm userObj={userObj} toggleEdit={toggleNew} />}\n        <div>\n          {questions.map((question) => (\n            <Question\n              key={question.id}\n              questionObj={question}\n              userObj={userObj}\n            />\n          ))}\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default Home;\n","import React from \"react\";\n\nconst Profile = () => <span>Profile</span>;\nexport default Profile;\n","import React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { authService } from \"fbase\";\n\nconst Navigation = () => {\n  const onLogOut = () => {\n    authService.signOut();\n  };\n\n  return (\n    <nav className=\"header\">\n      <ul className=\"header__menu\">\n        <li className=\"header__menu-item\">\n          <Link to=\"/\">Home</Link>\n        </li>\n        <li className=\"header__menu-item\">\n          <Link to=\"/profile\">Profile</Link>\n        </li>\n      </ul>\n      <span className=\"header__logout\" onClick={onLogOut}>\n        Log Out\n      </span>\n    </nav>\n  );\n};\n\nexport default Navigation;\n","import React, { useState } from \"react\";\nimport { authService, authInstance } from \"fbase\";\nimport { faGithub, faGoogle } from \"@fortawesome/free-brands-svg-icons\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\n\n// import \"assets/scss/pages/auth.scss\";\n\nconst Auth = () => {\n  const [email, setEmail] = useState(\"\");\n  const [password, setPasssword] = useState(\"\");\n  const [newAccount, setNewAccount] = useState(false);\n  const [error, setError] = useState(\"\");\n\n  const onChange = (event) => {\n    const {\n      target: { name, value },\n    } = event;\n\n    if (name === \"email\") {\n      setEmail(value);\n    } else if (name === \"password\") {\n      setPasssword(value);\n    }\n  };\n\n  const goSocialAuth = async (event) => {\n    const {\n      target: { name },\n    } = event;\n\n    let provider;\n    try {\n      if (name === \"google\") {\n        provider = new authInstance.GoogleAuthProvider();\n      } else if (name === \"github\") {\n        provider = new authInstance.GithubAuthProvider();\n      }\n      const data = await authService.signInWithPopup(provider);\n      console.log(data);\n    } catch (error) {\n      //setError(error.message);\n      console.log(error.message);\n    }\n  };\n\n  const onSubmit = async (event) => {\n    event.preventDefault();\n    let data;\n    try {\n      if (newAccount) {\n        data = await authService.createUserWithEmailAndPassword(\n          email,\n          password\n        );\n      } else {\n        data = await authService.signInWithEmailAndPassword(email, password);\n      }\n      console.log(data);\n    } catch (error) {\n      setError(error.message);\n    }\n  };\n\n  const toggleAccount = () => setNewAccount(!newAccount);\n\n  return (\n    <div className=\"auth-main main\">\n      <h1 className=\"login-title\">Login</h1>\n      <form className=\"signin-form\" onSubmit={onSubmit}>\n        <input\n          type=\"text\"\n          name=\"email\"\n          value={email}\n          onChange={onChange}\n          placeholder=\"Email Address *\"\n          className=\"signin-form__email\"\n          required\n        />\n        <input\n          type=\"password\"\n          name=\"password\"\n          value={password}\n          onChange={onChange}\n          placeholder=\"Password *\"\n          className=\"signin-form__password\"\n          required\n        />\n        <input\n          type=\"submit\"\n          value={newAccount ? \"회원가입\" : \"로그인\"}\n          className=\"signin-form__submit\"\n        />\n        <div>{error}</div>\n      </form>\n      <div className=\"social-login\">\n        <button\n          className=\"social-login__google\"\n          name=\"google\"\n          onClick={goSocialAuth}\n        >\n          <FontAwesomeIcon icon={faGoogle} className=\"faGoogle\" />\n          Continue with Google\n        </button>\n        <button\n          className=\"social-login__github\"\n          name=\"github\"\n          onClick={goSocialAuth}\n        >\n          <FontAwesomeIcon icon={faGithub} />\n          Continue with Github\n        </button>\n      </div>\n      <span className=\"toggle-account\" onClick={toggleAccount}>\n        {newAccount ? \"로그인\" : \"회원가입\"}\n      </span>\n    </div>\n  );\n};\n\nexport default Auth;\n","import React from \"react\";\nimport {\n  HashRouter as Router,\n  Route,\n  Switch,\n  Redirect,\n} from \"react-router-dom\";\nimport Home from \"routes/Home\";\nimport Profile from \"routes/Profile\";\nimport Navigation from \"./Navigation\";\n// import SignIn from \"routes/SignIn\";\nimport Auth from \"routes/Auth\";\n\nconst AppRouter = ({ isLoggedIn, userObj }) => {\n  return (\n    <Router>\n      {isLoggedIn ? <Navigation></Navigation> : \"\"}\n      <Switch>\n        {isLoggedIn ? (\n          <>\n            <Route exact path=\"/\">\n              <Home userObj={userObj} />\n            </Route>\n            <Route exact path=\"/profile\">\n              <Profile />\n            </Route>\n            <Redirect from=\"/*\" to=\"/\" />\n          </>\n        ) : (\n          <>\n            <Route exact path=\"/\">\n              <Auth />\n            </Route>\n            <Redirect from=\"/*\" to=\"/\" />\n          </>\n        )}\n      </Switch>\n    </Router>\n  );\n};\n\nexport default AppRouter;\n","import AppRouter from \"components/Router\";\nimport { useState, useEffect } from \"react\";\nimport { authService } from \"fbase\";\n\nfunction App() {\n  const [init, setInit] = useState(false);\n  const [isLoggedIn, setIsLoggedIn] = useState(authService.currentUser);\n  const [userObj, setUserObj] = useState(null);\n\n  useEffect(() => {\n    authService.onAuthStateChanged((user) => {\n      // console.log(user);\n      if (user) {\n        setIsLoggedIn(true);\n        setUserObj(user);\n      } else {\n        setIsLoggedIn(false);\n      }\n      setInit(true);\n    });\n  });\n\n  return (\n    <>\n      {init ? (\n        <AppRouter isLoggedIn={isLoggedIn} userObj={userObj} />\n      ) : (\n        \"Loading...\"\n      )}\n    </>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"components/App\";\nimport \"assets/scss/styles.scss\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n// reportWebVitals();\n"],"sourceRoot":""}