(this.webpackJsonpwechoo=this.webpackJsonpwechoo||[]).push([[0],{45:function(e,t,n){},46:function(e,t,n){"use strict";n.r(t);var c=n(2),i=n.n(c),r=n(27),a=n.n(r),o=n(6),s=n(20),u=n(5),j=n(10),O=n.n(j),d=n(15),l=n(21),b=n(18),p=(n(34),n(47),n(48),{apiKey:Object({NODE_ENV:"production",PUBLIC_URL:"/wechoo",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_API_KEY,authDomain:Object({NODE_ENV:"production",PUBLIC_URL:"/wechoo",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_AUTH_DOMAIN,projectId:Object({NODE_ENV:"production",PUBLIC_URL:"/wechoo",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_PROJECT_ID,storageBucket:Object({NODE_ENV:"production",PUBLIC_URL:"/wechoo",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_STORAGE_BUCKET,messagingSenderId:Object({NODE_ENV:"production",PUBLIC_URL:"/wechoo",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_MESSAGING_SENDER_ID,appId:Object({NODE_ENV:"production",PUBLIC_URL:"/wechoo",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_API_ID,measurementId:Object({NODE_ENV:"production",PUBLIC_URL:"/wechoo",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_MEASUREMENT_ID});b.a.initializeApp(p);var h=b.a.auth,x=b.a.auth(),_=b.a.firestore(),S=(b.a.storage(),n(1)),f=function(e){var t=e.questionObj,n=e.userObj,i=t.creator===n.uid,r=Object(c.useState)(!1),a=Object(o.a)(r,2),s=a[0],u=a[1],j=Object(c.useState)(""),b=Object(o.a)(j,2),p=b[0],h=b[1],x=Object(c.useState)(""),f=Object(o.a)(x,2),m=f[0],v=f[1],E=Object(c.useState)(""),C=Object(o.a)(E,2),g=C[0],A=C[1],T=Object(c.useState)({}),w=Object(o.a)(T,2),P=w[0],D=w[1],R=Object(c.useState)([]),k=Object(o.a)(R,2),N=k[0],I=k[1],B=function(){var e=Object(d.a)(O.a.mark((function e(){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=window.confirm("\uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?"),e.t0=n,!e.t0){e.next=5;break}return e.next=5,_.collection("Question").doc(t.id).delete();case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),K=function(e){var t=e.target,n=t.name,c=t.value;"newQuestion"===n?h(c):"newItemA"===n?v(c):"newItemB"===n&&A(c)},W=function(){s||(h(t.question),v(t.itemA),A(t.itemB)),u((function(e){return!e}))};Object(c.useEffect)((function(){_.collection("Answer").where("qid","==",t.id).onSnapshot((function(e){var t=e.docs.map((function(e){return Object(l.a)({id:e.id},e.data())}));I(t),D({pickCountA:t.filter((function(e){return"A"===e.pickCode})).length,pickCountB:t.filter((function(e){return"B"===e.pickCode})).length})}))}),[]);var H=function(){var e=Object(d.a)(O.a.mark((function e(n){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,_.collection("Question").doc(t.id).update({question:p,itemA:m,itemB:g});case 3:W();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=Object(d.a)(O.a.mark((function e(c){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!N.find((function(e){return e.uid===n.uid}))){e.next=3;break}return alert("\uc774\ubbf8 \uc120\ud0dd\ud558\uc168\uc2b5\ub2c8\ub2e4."),e.abrupt("return");case 3:return e.next=5,_.collection("Answer").add({qid:t.id,uid:n.uid,pickCode:c,createAt:Date.now()});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(S.jsx)(S.Fragment,{children:s?Object(S.jsx)(S.Fragment,{children:Object(S.jsxs)("form",{onSubmit:H,children:[Object(S.jsx)("input",{name:"newQuestion",onChange:K,value:p,type:"text"}),Object(S.jsxs)("div",{children:[Object(S.jsx)("input",{name:"newItemA",onChange:K,value:m,type:"text"}),Object(S.jsx)("input",{name:"newItemB",onChange:K,value:g,type:"text"})]}),Object(S.jsx)("input",{type:"submit",value:"Edit"}),Object(S.jsx)("button",{onClick:W,children:"Cancel"})]})}):Object(S.jsxs)("div",{children:[Object(S.jsx)("h4",{children:t.question}),Object(S.jsxs)("div",{children:[Object(S.jsxs)("div",{children:[Object(S.jsx)("span",{children:P.pickCountA}),Object(S.jsx)("button",{onClick:function(){return y("A")},children:t.itemA})]}),Object(S.jsx)("span",{children:" VS "}),Object(S.jsxs)("div",{children:[Object(S.jsx)("span",{children:P.pickCountB}),Object(S.jsx)("button",{onClick:function(){return y("B")},children:t.itemB})]})]}),i&&Object(S.jsxs)("div",{className:"edit-buttons",children:[Object(S.jsx)("button",{onClick:B,children:"Delete Question"}),Object(S.jsx)("button",{onClick:W,children:"Edit Question"})]})]})})},m=function(e){var t=e.userObj,n=Object(c.useState)(""),i=Object(o.a)(n,2),r=i[0],a=i[1],s=Object(c.useState)(""),u=Object(o.a)(s,2),j=u[0],b=u[1],p=Object(c.useState)(""),h=Object(o.a)(p,2),x=h[0],m=h[1],v=Object(c.useState)([]),E=Object(o.a)(v,2),C=E[0],g=E[1];Object(c.useEffect)((function(){_.collection("Question").orderBy("createAt","desc").onSnapshot((function(e){var t=e.docs.map((function(e){return Object(l.a)(Object(l.a)({id:e.id},e.data()),{},{pickCountA:0,pickCountB:0})}));g(t)}))}),[]);var A=function(e){var t=e.target,n=t.name,c=t.value;"question"===n?a(c):"itemA"===n?b(c):"itemB"===n&&m(c)},T=function(){var e=Object(d.a)(O.a.mark((function e(n){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),console.log(r),e.next=4,_.collection("Question").add({question:r,itemA:j,itemB:x,creator:t.uid,createAt:Date.now()});case 4:a("");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(S.jsxs)("div",{children:[Object(S.jsxs)("form",{onSubmit:T,children:[Object(S.jsx)("span",{children:"question"}),Object(S.jsx)("input",{name:"question",placeholder:"\ubb34\uc5c7\uc744 \uc120\ud0dd\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?",value:r,onChange:A,type:"text"}),Object(S.jsxs)("div",{children:[Object(S.jsx)("input",{type:"text",name:"itemA",placeholder:"A\uc548",value:j,onChange:A}),Object(S.jsx)("input",{type:"text",name:"itemB",placeholder:"B\uc548",value:x,onChange:A})]}),Object(S.jsx)("input",{type:"submit",value:"question"})]}),Object(S.jsx)("div",{children:C.map((function(e){return Object(S.jsx)(f,{questionObj:e,userObj:t},e.id)}))})]})},v=function(){return Object(S.jsx)("span",{children:"Profile"})},E=function(){return Object(S.jsxs)("nav",{children:[Object(S.jsxs)("ul",{children:[Object(S.jsx)("li",{children:Object(S.jsx)(s.b,{to:"/",children:"Home"})}),Object(S.jsx)("li",{children:Object(S.jsx)(s.b,{to:"/profile",children:"Profile"})})]}),Object(S.jsx)("input",{type:"button",value:"Log Out",onClick:function(){x.signOut()}})]})},C=function(){var e=Object(c.useState)(""),t=Object(o.a)(e,2),n=t[0],i=t[1],r=Object(c.useState)(""),a=Object(o.a)(r,2),s=a[0],u=a[1],j=Object(c.useState)(!1),l=Object(o.a)(j,2),b=l[0],p=l[1],_=Object(c.useState)(""),f=Object(o.a)(_,2),m=f[0],v=f[1],E=function(e){var t=e.target,n=t.name,c=t.value;"email"===n?i(c):"password"===n&&u(c)},C=function(){var e=Object(d.a)(O.a.mark((function e(t){var n,c,i;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.target.name,e.prev=1,"google"===n?c=new h.GoogleAuthProvider:"github"===n&&(c=new h.GithubAuthProvider),e.next=5,x.signInWithPopup(c);case 5:i=e.sent,console.log(i),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0.message);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=Object(d.a)(O.a.mark((function e(t){var c;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),e.prev=1,!b){e.next=8;break}return e.next=5,x.createUserWithEmailAndPassword(n,s);case 5:c=e.sent,e.next=11;break;case 8:return e.next=10,x.signInWithEmailAndPassword(n,s);case 10:c=e.sent;case 11:console.log(c),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),v(e.t0.message);case 17:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(t){return e.apply(this,arguments)}}();return Object(S.jsxs)("div",{className:"main",children:[Object(S.jsx)("h1",{className:"login-title",children:"Login"}),Object(S.jsxs)("form",{className:"signin-form",onSubmit:g,children:[Object(S.jsx)("input",{type:"text",name:"email",value:n,onChange:E,placeholder:"Email Address *",className:"signin-form__email",required:!0}),Object(S.jsx)("input",{type:"password",name:"password",value:s,onChange:E,placeholder:"Password *",className:"signin-form__password",required:!0}),Object(S.jsx)("input",{type:"submit",value:b?"\ud68c\uc6d0\uac00\uc785":"\ub85c\uadf8\uc778",className:"signin-form__submit"}),Object(S.jsx)("div",{children:m})]}),Object(S.jsxs)("div",{className:"social-login",children:[Object(S.jsx)("button",{className:"social-login__google",name:"google",onClick:C,children:"Continue with Google"}),Object(S.jsx)("button",{className:"social-login__github",name:"github",onClick:C,children:"Continue with Github"})]}),Object(S.jsx)("span",{className:"toggle-account",onClick:function(){return p(!b)},children:b?"\ub85c\uadf8\uc778":"\ud68c\uc6d0\uac00\uc785"})]})},g=function(e){var t=e.isLoggedIn,n=e.userObj;return Object(S.jsxs)(s.a,{children:[t?Object(S.jsx)(E,{}):"",Object(S.jsx)(u.d,{children:t?Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(u.b,{exact:!0,path:"/",children:Object(S.jsx)(m,{userObj:n})}),Object(S.jsx)(u.b,{exact:!0,path:"/profile",children:Object(S.jsx)(v,{})}),Object(S.jsx)(u.a,{from:"/*",to:"/"})]}):Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(u.b,{exact:!0,path:"/",children:Object(S.jsx)(C,{})}),Object(S.jsx)(u.a,{from:"/*",to:"/"})]})})]})};var A=function(){var e=Object(c.useState)(!1),t=Object(o.a)(e,2),n=t[0],i=t[1],r=Object(c.useState)(x.currentUser),a=Object(o.a)(r,2),s=a[0],u=a[1],j=Object(c.useState)(null),O=Object(o.a)(j,2),d=O[0],l=O[1];return Object(c.useEffect)((function(){x.onAuthStateChanged((function(e){console.log(e),e?(u(!0),l(e)):u(!1),i(!0)}))})),Object(S.jsx)(S.Fragment,{children:n?Object(S.jsx)(g,{isLoggedIn:s,userObj:d}):"Loading..."})};n(45);a.a.render(Object(S.jsx)(i.a.StrictMode,{children:Object(S.jsx)(A,{})}),document.getElementById("root"))}},[[46,1,2]]]);
//# sourceMappingURL=main.7958e66c.chunk.js.map